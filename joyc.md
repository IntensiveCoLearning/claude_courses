---
timezone: UTC+9
---

# hython

**GitHub ID:** joyc

**Telegram:** @hython

## Self-introduction

web3 ä»ä¸šè€…ï¼ŒAI çˆ±å¥½è€…

## Notes

<!-- Content_START -->
# 2025-08-10

# ç¬¬äºŒåå…­è¯¾ Exercise on prompting

## è¯¾ç¨‹ç›®æ ‡
- æå‡ä¸€ä¸ªå·²æœ‰çš„ä½è´¨é‡ Promptï¼Œåˆ©ç”¨ä¹‹å‰å­¦è¿‡çš„æ‰€æœ‰ Prompt Engineering æŠ€å·§ã€‚
- æ•°æ®é›†åŒ…å«å­¦æœ¯æ–‡ç« çš„æ®µè½ï¼ˆ`content` å­—æ®µï¼‰ã€‚
- ä»»åŠ¡ï¼šä»æ®µè½ä¸­æå–æ‰€æœ‰æåˆ°çš„**ä¸»é¢˜**ï¼Œè¿”å› JSON å­—ç¬¦ä¸²æ•°ç»„ã€‚

## åˆå§‹çŠ¶æ€
- ç°æœ‰ Prompt è¡¨ç°å·®ï¼Œå¹³å‡åˆ†çº¦ **2.8**ã€‚
- è¾“å‡ºä¸ç¬¦åˆè¦æ±‚ï¼ˆé JSON æ•°ç»„æˆ–æ ¼å¼é”™è¯¯ï¼‰ã€‚
- ç›®æ ‡ï¼šå°†å¹³å‡åˆ†æå‡è‡³ **7+**ã€‚

## ä¼˜åŒ–æ­¥éª¤

### 1. æ¸…æ™°ç›´æ¥ï¼ˆBe Clear and Directï¼‰
- ç›´æ¥åœ¨ç¬¬ä¸€è¡Œè¯´æ˜ä»»åŠ¡ï¼š
  ```
  Extract key topics mentioned from a passage of text from a scholarly article into a JSON array of strings.
  ```
- æ˜ç¡®è¦æ±‚è¿”å› **JSON å­—ç¬¦ä¸²æ•°ç»„**ã€‚
- ç«‹å³è¯„åˆ†æå‡è‡³ **9.5**ã€‚

### 2. æ·»åŠ ç»“æ„ï¼ˆXML æ ‡ç­¾ï¼‰
- ä¸ºè¾“å…¥å†…å®¹å¢åŠ æ ‡ç­¾ï¼Œä½¿æ¨¡å‹æ›´æ˜“è¯†åˆ«ï¼š
  ```xml
  <text>
  [æ–‡ç« æ®µè½å†…å®¹]
  </text>
  ```
- æ ‡ç­¾åä¸æè¿°ä¿æŒä¸€è‡´ï¼ˆå¦‚ `text` å¯¹åº”ç¬¬ä¸€è¡Œ prompt ä¸­çš„â€œpassage of textâ€ï¼‰ã€‚

### 3. å…·ä½“åŒ–ï¼ˆBe Specificï¼‰
- æ·»åŠ åˆ†æ­¥æŒ‡ä»¤ï¼š
  ```
  Follow these steps:
  1. Closely examine the provided text.
  2. Identify each topic mentioned.
  3. Add each topic to a JSON array.
  4. Respond only with the JSON array. Do not provide any other text or commentary.
  ```

## è¯„åˆ†ç»“æœ
- æ”¹è¿›åå¤šæ¬¡è¿è¡Œï¼Œåˆ†æ•°ç¨³å®šåœ¨ **9.5**ã€‚
- Prompt åœ¨æå–ä¸»é¢˜ä»»åŠ¡ä¸­è¡¨ç°ç¨³å®šå¯é ã€‚

## æ€»ç»“
- **æ ¸å¿ƒä¼˜åŒ–**ï¼šæ¸…æ™°ç›´æ¥è¯´æ˜ä»»åŠ¡ + XML æ ‡ç­¾ç»“æ„åŒ–è¾“å…¥ + æ˜ç¡®åˆ†æ­¥è¦æ±‚ã€‚
- å¦‚æœéœ€è¦å¤„ç†ç‰¹æ®Šæ ¼å¼æˆ–å¤æ‚ä»»åŠ¡ï¼Œå¯å¢åŠ  **One-shot / Multi-shot** ç¤ºä¾‹ï¼Œä½†æ­¤ä¾‹å·²è¶³å¤Ÿè¾¾æˆç›®æ ‡ã€‚

# 2025-08-09

# ç¬¬äºŒåå››è¯¾ï¼šä½¿ç”¨ XML æ ‡ç­¾ä¸º Prompt æä¾›ç»“æ„

## æ ¸å¿ƒæ¦‚å¿µ
- **ç›®çš„**ï¼šé€šè¿‡åœ¨ Prompt ä¸­ä½¿ç”¨ XML æ ‡ç­¾ï¼Œä¸ºæ’å…¥çš„å¤§é‡æˆ–å¤šç±»å‹å†…å®¹æä¾›æ¸…æ™°çš„ç»“æ„ï¼Œå¸®åŠ©æ¨¡å‹å‡†ç¡®ç†è§£å„éƒ¨åˆ†çš„å«ä¹‰å’Œå½’å±ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼š
  - Prompt ä¸­éœ€è¦æ’å…¥å¤§é‡æ•°æ®ï¼ˆå¦‚é•¿ç¯‡é”€å”®è®°å½•ã€æ–‡æ¡£ç­‰ï¼‰æ—¶ã€‚
  - ä¸åŒç±»å‹çš„å†…å®¹ï¼ˆä»£ç ã€æ–‡æ¡£ã€å‚æ•°ç­‰ï¼‰æ··åˆåœ¨ä¸€èµ·ï¼Œå®¹æ˜“å¼•èµ·æ¨¡å‹æ··æ·†ã€‚

## æ–¹æ³•ä¸ç¤ºä¾‹
1. **åŸºæœ¬åšæ³•**
   - è‡ªå®šä¹‰æ ‡ç­¾åï¼Œç”¨å°–æ‹¬å·åŒ…è£¹å†…å®¹ï¼Œä¾‹å¦‚ï¼š
     ```xml
     <sales_records>
       ...é”€å”®è®°å½•å†…å®¹...
     </sales_records>
     ```
   - æ ‡ç­¾ååº”å°½é‡å…·ä½“ï¼Œå¦‚ `sales_records` æ¯” `data` æ›´æœ‰æ„ä¹‰ã€‚
   
2. **ä¸ºä»€ä¹ˆæœ‰ç”¨**
   - è®©æ¨¡å‹æ¸…æ¥šä¸åŒå†…å®¹å—çš„å«ä¹‰ï¼Œå‡å°‘é”™è¯¯ç†è§£ã€‚
   - ç‰¹åˆ«é€‚åˆè°ƒè¯•ç±»ä»»åŠ¡ä¸­åŒºåˆ†â€œä»£ç éƒ¨åˆ†â€å’Œâ€œæ–‡æ¡£éƒ¨åˆ†â€ã€‚

3. **è°ƒè¯•åœºæ™¯ç¤ºä¾‹**
   - æœªåŠ æ ‡ç­¾æ—¶ï¼šæ¨¡å‹éš¾ä»¥åŒºåˆ†å“ªä¸ªæ˜¯éœ€è¦è°ƒè¯•çš„ä»£ç ï¼Œå“ªä¸ªæ˜¯å‚è€ƒæ–‡æ¡£ã€‚
   - åŠ æ ‡ç­¾åï¼š
     ```xml
     <my_code>
       ...éœ€è¦è°ƒè¯•çš„ä»£ç ...
     </my_code>
     <docs>
       ...ç›¸å…³æ–‡æ¡£...
     </docs>
     ```

4. **åœ¨æœ¬è¯¾ç¨‹ä»»åŠ¡ä¸­çš„åº”ç”¨**
   - å½“å‰ä»»åŠ¡ä¸­ï¼Œ`height`ã€`weight`ã€`goal`ã€`restrictions` ç­‰å†…å®¹è¾ƒçŸ­ï¼Œç†è®ºä¸Šä¸æ˜“æ··æ·†ã€‚
   - ä½†ä»å¯ç”¨æ ‡ç­¾å¢å¼ºè¯­ä¹‰æ¸…æ™°åº¦ï¼Œä¾‹å¦‚ï¼š
     ```xml
     <athlete_information>
       Height: xxx
       Weight: xxx
       Goal: xxx
       Restrictions: xxx
     </athlete_information>
     ```

## å®éªŒæ•ˆæœ
- åœ¨ç¤ºä¾‹ä¸­ï¼Œæ·»åŠ  `<athlete_information>` æ ‡ç­¾åï¼ŒPrompt è¯„ä¼°åˆ†æ•°ä» **7.3** æå‡åˆ°æ›´é«˜æ°´å¹³ï¼ˆæå‡å¹…åº¦å› æ¨¡å‹å’Œæ•°æ®è€Œå¼‚ï¼‰ã€‚
- å¤§æ¨¡å‹å¯èƒ½æå‡ä¸æ˜æ˜¾ï¼Œä½†åœ¨ä¸­ä½ç«¯æ¨¡å‹ä¸Šï¼Œç»“æ„åŒ–æ ‡ç­¾èƒ½æ˜¾è‘—å‡å°‘ç†è§£åå·®ã€‚

## æ€»ç»“
- XML æ ‡ç­¾æ˜¯ä¸€ç§ä½æˆæœ¬ã€é«˜é€šç”¨æ€§çš„ Prompt ä¼˜åŒ–æ–¹å¼ã€‚
- æ ‡ç­¾åº”å…·å¤‡æ˜ç¡®çš„è¯­ä¹‰ï¼Œè¦†ç›–å†…å®¹åº”æˆå¯¹åŒ…è£¹ã€‚
- å¯¹é•¿æ–‡æœ¬ã€æ··åˆå†…å®¹å°¤ä¸ºæœ‰æ•ˆã€‚
---
# ç¬¬äºŒåäº”è¯¾ï¼šåœ¨ Prompt ä¸­æä¾›ç¤ºä¾‹ï¼ˆOne-shot & Multi-shot Promptingï¼‰

## æ ¸å¿ƒæ¦‚å¿µ
- åœ¨æç¤ºè¯ä¸­åŠ å…¥ç¤ºä¾‹ï¼ˆExampleï¼‰ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ¨¡å‹è¾“å‡ºè´¨é‡ã€‚
- **One-shot prompting**ï¼šæä¾›ä¸€ä¸ªç¤ºä¾‹ã€‚
- **Multi-shot prompting**ï¼šæä¾›å¤šä¸ªç¤ºä¾‹ã€‚
- å¸¸ç”¨äºï¼š
  - å¤„ç†**è¾¹ç¼˜æƒ…å†µï¼ˆcorner casesï¼‰**ã€‚
  - æŒ‡å®š**å¤æ‚è¾“å‡ºæ ¼å¼**ã€‚
  - å¼ºåŒ–æ¨¡å‹å¯¹ç‰¹å®šä»»åŠ¡çš„ç†è§£ã€‚

## åŸç†ä¸å¥½å¤„
1. **é€šè¿‡å®ä¾‹å¼•å¯¼æ¨¡å‹**ï¼šæ˜ç¡®å‘Šè¯‰ Claude ç»™å®šè¾“å…¥æ—¶çš„ç†æƒ³è¾“å‡ºã€‚
2. **é…åˆ XML æ ‡ç­¾**ï¼š
   - ç¤ºä¾‹è¾“å…¥ç”¨ `<sample_input>` åŒ…è£¹ã€‚
   - ç¤ºä¾‹è¾“å‡ºç”¨ `<ideal_output>` åŒ…è£¹ã€‚
   - ç»“æ„æ¸…æ™°ï¼Œæ¨¡å‹æ˜“äºè¯†åˆ«å†…å®¹ç±»å‹ã€‚
3. **å¤„ç†è®½åˆº/éšå–»ç­‰éš¾åˆ¤æ–­æƒ…å†µ**ï¼š
   - ä¾‹ï¼šæ¨æ–‡ *"Yeah, sure, that was the best movie I've ever seen since Plan 9 from Outer Space"* å®é™…ä¸ºè´Ÿé¢æƒ…ç»ªã€‚
   - åœ¨ç¤ºä¾‹ä¸­æ˜ç¡®å‘Šè¯‰ Claude è¿™æ˜¯ **negative**ã€‚

## å®è·µæ–¹æ³•
1. ä»å·²æœ‰ **é«˜åˆ†æˆ–æ»¡åˆ†** æµ‹è¯•ç”¨ä¾‹ä¸­é€‰å–ç¤ºä¾‹ã€‚
2. åœ¨ Prompt ä¸­åŠ å…¥è¯´æ˜ï¼š
   ```
   Here is an example with a sample input and an ideal output:
   <sample_input>...</sample_input>
   <ideal_output>...</ideal_output>
   ```
3. å¯é€‰å¢å¼ºï¼šæ·»åŠ **ä¸ºä»€ä¹ˆè¿™æ˜¯ç†æƒ³è¾“å‡º**çš„è§£é‡Šï¼ˆä»è¯„ä¼°æŠ¥å‘Šä¸­å¤åˆ¶ reasoning éƒ¨åˆ†ï¼‰ã€‚
4. å¯¹å¤æ‚ JSON ç­‰ç»“æ„ï¼Œç›´æ¥ç»™å‡ºä¸€ä¸ªæ ¼å¼æ­£ç¡®çš„ç¤ºä¾‹ï¼Œè®© Claude å­¦ä¹ ç»“æ„ã€‚

## ç¤ºä¾‹åœºæ™¯
- æƒ…æ„Ÿåˆ†æï¼ˆå«è®½åˆºåˆ¤æ–­ï¼‰
- å¤æ‚ JSON å“åº”ç”Ÿæˆ
- æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆï¼ˆæ ¼å¼åŒ–è¦æ±‚ï¼‰

## æœ¬è¯¾å®éªŒç»“æœ
- åœ¨åŸæœ‰ Prompt åŸºç¡€ä¸ŠåŠ å…¥ç¤ºä¾‹åï¼Œè¯„ä¼°åˆ†æ•°ä» **7.3** æå‡è‡³ **7.96**ã€‚
- æå‡å¹…åº¦è™½å°ï¼Œä½†å¯¹é•¿æœŸç¨³å®šé«˜è´¨é‡è¾“å‡ºéå¸¸æœ‰æ•ˆã€‚

## ç»“è®º
- åœ¨ Prompt ä¸­æä¾›ç¤ºä¾‹æ˜¯æœ€æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹æ³•ä¹‹ä¸€ã€‚
- **One-shot** é€‚ç”¨äºä»»åŠ¡ç®€å•æˆ–æ•°æ®ç¨€ç¼ºåœºæ™¯ã€‚
- **Multi-shot** é€‚ç”¨äºä»»åŠ¡å¤æ‚ã€éœ€è¦†ç›–å¤šç§æƒ…å†µçš„åœºæ™¯ã€‚

# 2025-08-08

# ç¬¬äºŒåä¸€è¯¾ - Prompt Engineering å…¥é—¨ä¸é¡¹ç›®åˆå§‹åŒ–

## ğŸ¯ è¯¾ç¨‹ç›®æ ‡  
- ä» **Prompt Evaluation** è½¬å‘ **Prompt Engineering**  
- å­¦ä¹ é€šè¿‡ä¼˜åŒ– prompt æ¥è·å¾—æ›´é«˜è´¨é‡ã€æ›´ç¨³å®šçš„è¾“å‡º  
- ç”¨åŒä¸€é¡¹ç›®è´¯ç©¿æ•´ä¸ªæ¨¡å—ï¼šä»åˆç‰ˆ prompt â†’ å¤šè½®æ”¹è¿› â†’ æå‡è¯„åˆ†  

---

## ğŸ“Œ æœ¬è¯¾å†…å®¹  
1. **æ¨¡å—ç»“æ„**  
   - ç¬¬1-2èŠ‚ï¼šç¼–å†™åˆç‰ˆ promptï¼ˆå¯èƒ½å¾ˆå·®ï¼‰  
   - åç»­å¤šèŠ‚ï¼šé€æ­¥åº”ç”¨ä¸åŒ Prompt Engineering æŠ€æœ¯ä¼˜åŒ–ï¼Œå¹¶åå¤è·‘ eval  
   - ä½¿ç”¨ä¸Šä¸€æ¨¡å—æ”¹è¿›ç‰ˆçš„ **é€šç”¨åŒ– eval pipeline**ï¼ˆæ”¯æŒä»»æ„ promptï¼‰  

2. **é¡¹ç›®ç›®æ ‡**  
   - ç¼–å†™ä¸€ä¸ª promptï¼šæ ¹æ®è¿åŠ¨å‘˜çš„ **èº«é«˜ã€ä½“é‡ã€ç›®æ ‡ã€é¥®é£Ÿé™åˆ¶** ç”Ÿæˆ **ä¸€å¤©çš„é¥®é£Ÿè®¡åˆ’**  
   - è¾“å‡ºåº”åŒ…å«ï¼š
     - æ¯æ—¥æ€»çƒ­é‡  
     - å®é‡è¥å…»ç´ åˆ†é…  
     - é¤é£ŸåŠå…·ä½“é£Ÿç‰©ã€ä»½é‡ã€æ—¶é—´  

3. **æ–°å·¥å…·ï¼šPromptEvaluator ç±»**  
   - é›†æˆæ•°æ®é›†ç”Ÿæˆã€æ¨¡å‹è¯„åˆ†ç­‰åŠŸèƒ½  
   - æ”¯æŒå¹¶å‘ï¼ˆ`max_concurrent_tasks`ï¼‰ï¼Œå¯åŠ å¿« eval é€Ÿåº¦  
   - å¹¶å‘è¿‡é«˜ä¼šè§¦å‘ API é™é€Ÿï¼Œå»ºè®®å¼€å§‹ç”¨ 3 æˆ–ä»¥ä¸‹ï¼ˆä½œè€…æ¼”ç¤ºç”¨ 50ï¼‰  

4. **æ•°æ®é›†ç”Ÿæˆï¼ˆgenerate_dataset æ–¹æ³•ï¼‰**  
   - è¾“å…¥ï¼šprompt çš„ç”¨é€”æè¿° + è¾“å…¥å­—æ®µå®šä¹‰ï¼ˆheight, weight, goal, restrictionsï¼‰  
   - `num_test_cases` å»ºè®® 3ï¼ˆå¿«é€Ÿè°ƒè¯•ï¼‰  
   - è¾“å‡ºå†™å…¥ `dataset.json`  

5. **åˆç‰ˆ Promptï¼ˆrun_prompt æ–¹æ³•ï¼‰**  
   - æç®€å†™æ³•ï¼š  
     ```
     What should this person eat?
     Height: {height}
     Weight: {weight}
     Goal: {goal}
     Restrictions: {restrictions}
     ```
   - å°†æ•°æ®é›†ä¸­çš„æ¯æ¡ case çš„è¾“å…¥æ’å…¥æ¨¡æ¿  

6. **é¢å¤–è¯„åˆ†æ ‡å‡†ï¼ˆextra_criteria å‚æ•°ï¼‰**  
   - åœ¨ model grader ä¸­å¢åŠ é™„åŠ è¦æ±‚ï¼š  
     - å«æ¯æ—¥çƒ­é‡æ€»è®¡  
     - å«å®é‡è¥å…»ç´ æ¯”ä¾‹  
     - å«å…·ä½“é£Ÿç‰©ã€ä»½é‡ã€æ—¶é—´  
   - æé«˜å¯¹è¾“å‡ºçš„éªŒè¯è¦æ±‚  

7. **é¦–æ¬¡è¯„ä¼°ç»“æœ**  
   - åˆ†æ•°æä½ï¼ˆç¤ºä¾‹ 2.32ï¼Œå› æ•…æ„ç”¨å¼±æ¨¡å‹ï¼‰  
   - ç”Ÿæˆ `output.html`ï¼Œå¯æµè§ˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šï¼ˆä»»åŠ¡ã€è¯„åˆ†ã€æ¨ç†ã€è§£å†³æ–¹æ¡ˆç­‰ï¼‰  

---

## âœ… æœ¬è¯¾ç»“è®º  
- å·²å®Œæˆé¡¹ç›®çš„ **ç›®æ ‡è®¾å®š + æ•°æ®é›†ç”Ÿæˆ + åˆç‰ˆ prompt ç¼–å†™ + åˆæ¬¡ eval**  
- å½“å‰åˆ†æ•°å¾ˆå·® â†’ åç»­è§†é¢‘å°†ç”¨ä¸åŒçš„ Prompt Engineering æŠ€æœ¯è¿­ä»£ä¼˜åŒ– 
---
# ç¬¬äºŒåäºŒè¯¾  Being clear and direct

## æ ¸å¿ƒç›®æ ‡
- é€šè¿‡ç¬¬ä¸€ä¸ª Prompt Engineering æŠ€å·§ **â€œæ¸…æ™°ä¸”ç›´æ¥â€** æ”¹è¿›åˆç‰ˆæç¤ºè¯ï¼Œæé«˜è¯„ä¼°å¾—åˆ†ã€‚
- å½“å‰èµ·å§‹å¾—åˆ†ä¸º **2.32**ï¼Œç›®æ ‡æ˜¯é€æ­¥ä¼˜åŒ–ã€‚

---

## æŠ€å·§è¯´æ˜ï¼šæ¸…æ™°ä¸”ç›´æ¥ï¼ˆBe Clear and Directï¼‰
1. **é‡ç‚¹ä½ç½®**
   - **æç¤ºè¯ç¬¬ä¸€è¡Œ**æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå†³å®šäº† Claude å¯¹ä»»åŠ¡çš„ç†è§£ã€‚

2. **å†™æ³•è¦ç‚¹**
   - ä½¿ç”¨ç®€å•ç›´æ¥çš„è¯­è¨€ã€‚
   - ç”¨**åŠ¨è¯**å¼€å¤´ï¼Œæ˜ç¡®å‘Šè¯‰ Claude è¦åšä»€ä¹ˆã€‚
   - æä¾›è¾“å‡ºç±»å‹ä¸å†…å®¹èŒƒå›´çš„æç¤ºã€‚

3. **ç¤ºä¾‹**
   - `Write three paragraphs about how solar panels work.`  
     - åŠ¨è¯ `Write` æ˜ç¡®äº†ä»»åŠ¡æ˜¯å†™ä½œã€‚
     - æŒ‡å®šäº†ç¯‡å¹…ä¸ä¸»é¢˜ã€‚
   - `Identify three countries that use geothermal energy and for each include generation stats.`  
     - åŠ¨è¯ `Identify` æŒ‡æ˜ä»»åŠ¡æ˜¯æ‰¾å‡ºä¿¡æ¯ï¼Œå¹¶è¡¥å……äº†è¾“å‡ºç»†èŠ‚ã€‚

---

## åº”ç”¨åˆ°å½“å‰é¡¹ç›®
- åŸ prompt å¼€å¤´è¿‡äºéšæ„ï¼Œæ²¡æœ‰ç›´æ¥ä¼ è¾¾ä»»åŠ¡ã€‚
- æ”¹è¿›åçš„å¼€å¤´ç¤ºä¾‹ï¼š
  ```
  Generate a one-day meal plan for an athlete that meets their dietary restrictions.
  ```
  - ä½¿ç”¨ `Generate` ä½œä¸ºåŠ¨è¯å¼€å¤´ï¼Œç›´æ¥ä¸‹è¾¾ä»»åŠ¡æŒ‡ä»¤ã€‚
  - ç®€æ´æè¿°äº†è¾“å‡ºç›®æ ‡ä¸é™åˆ¶æ¡ä»¶ã€‚

---

## æ•ˆæœ
- è¿è¡Œæ–°çš„ prompt å¹¶é‡æ–°è¯„ä¼°ã€‚
- å¾—åˆ†ä» **2.32** æå‡åˆ° **3.92**ï¼Œæœ‰æ˜æ˜¾è¿›æ­¥ä½†ä»éœ€è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚

---
# ç¬¬äºŒåä¸‰è¯¾ Prompt Engineering - ä¿æŒå…·ä½“æ€§ï¼ˆBeing Specificï¼‰

### æ ¸å¿ƒæ¦‚å¿µ
åœ¨ Prompt å·¥ç¨‹ä¸­ï¼Œâ€œå…·ä½“æ€§â€æ„å‘³ç€åœ¨æç¤ºä¸­åˆ—å‡ºæ˜ç¡®çš„æŒ‡å¯¼æ–¹é’ˆï¼ˆguidelinesï¼‰æˆ–æ­¥éª¤ï¼ˆstepsï¼‰ï¼Œä»¥å¼•å¯¼æ¨¡å‹æœç‰¹å®šæ–¹å‘ç”Ÿæˆå†…å®¹ã€‚  
å…·ä½“æ€§æœ‰åŠ©äºå‡å°‘è¾“å‡ºçš„éšæœºæ€§ï¼Œæé«˜ç»“æœè´¨é‡ã€‚

### ä¸¤ç§å¸¸è§æ–¹å¼
1. **Guidelinesï¼ˆæŒ‡å¯¼æ–¹é’ˆï¼‰**  
   - åˆ—å‡ºè¾“å‡ºåº”å…·å¤‡çš„å±æ€§ã€ç»“æ„æˆ–é™åˆ¶æ¡ä»¶ã€‚
   - ç¤ºä¾‹ï¼š
     - æ§åˆ¶å­—æ•°ï¼ˆå¦‚ï¼š1000 å­—ä»¥å†…ï¼‰ã€‚
     - åŒ…å«ç‰¹å®šæƒ…èŠ‚æˆ–è§’è‰²ã€‚
     - ç¡®ä¿æœ‰æ˜ç¡®çš„å¼€å¤´ã€ä¸­é—´å’Œç»“å°¾ã€‚

2. **Stepsï¼ˆæ­¥éª¤æŒ‡ä»¤ï¼‰**  
   - ç»™æ¨¡å‹ä¸€ä¸ªåˆ†æ­¥æ€è€ƒå’Œæ‰§è¡Œçš„è·¯å¾„ã€‚  
   - ç¤ºä¾‹ï¼š
     1. å…ˆå¤´è„‘é£æš´ 3 ä¸ªå¯èƒ½çš„åˆ›æ„ã€‚  
     2. é€‰æ‹©æœ€æœ‰è¶£çš„ä¸€ä¸ªã€‚  
     3. è®¾è®¡ä¸€ä¸ªæ­ç¤ºè¯¥åˆ›æ„çš„åœºæ™¯ã€‚  
     4. æ·»åŠ è‡³å°‘ä¸€ä¸ªè¾…åŠ©è§’è‰²ã€‚

### å®éªŒç»“æœ
- åœ¨â€œç”Ÿæˆè¿åŠ¨å‘˜ä¸€æ—¥é¥®é£Ÿè®¡åˆ’â€çš„ä»»åŠ¡ä¸­ï¼š  
  - **æ·»åŠ  Guidelines** â†’ åˆ†æ•°ä» **3.92** æå‡åˆ° **7.86**ã€‚  
  - **æ·»åŠ  Steps** â†’ åˆ†æ•°çº¦ä¸º **7.3**ï¼Œç¨ä½äºçº¯ Guidelinesï¼Œä½†ä¾ç„¶æ˜¾è‘—æå‡ã€‚
- ç»“è®ºï¼š
  - å¸¸è§„å»ºè®®ï¼šä¼˜å…ˆä½¿ç”¨ **Guidelines** æ§åˆ¶è¾“å‡ºå±æ€§ã€‚
  - å¯¹äºå¤æ‚ä»»åŠ¡ï¼šç»“åˆ **Steps** å¼ºåˆ¶æ¨¡å‹è€ƒè™‘æ›´å¹¿çš„è§†è§’å’Œç»†èŠ‚ã€‚

### ä½¿ç”¨å»ºè®®
- **Guidelines** â†’ é€‚ç”¨äºå‡ ä¹æ‰€æœ‰ Promptï¼Œå¸®åŠ©ç¡®ä¿è¾“å‡ºæ ¼å¼ã€é£æ ¼å’Œå…³é”®è¦ç´ ã€‚
- **Steps** â†’ åœ¨éœ€è¦æ¨ç†ã€åˆ†æã€ç”Ÿæˆå¤šé˜¶æ®µå†…å®¹æ—¶å°¤ä¸ºæœ‰æ•ˆï¼Œä¾‹å¦‚ï¼šè°ƒæŸ¥åŸå› ã€ç­–ç•¥åˆ¶å®šã€å¤æ‚åˆ›æ„ä»»åŠ¡ã€‚

# 2025-08-07

# ç¬¬ 20 è¯¾ï¼šä¼˜åŒ–æ¨¡å‹è¯„åˆ†çš„æç¤ºè¯è®¾è®¡

æœ¬èŠ‚è¯¾æ˜¯ä¸€ä¸ªå®è·µç»ƒä¹ ï¼Œç›®æ ‡æ˜¯**é€šè¿‡æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯æ¥æ”¹è¿›æ¨¡å‹è¯„åˆ†å™¨ï¼ˆModel Graderï¼‰**ï¼Œæå‡æç¤ºè¯ï¼ˆPromptï¼‰çš„è¯„ä¼°æ•ˆæœã€‚

---

## ğŸ¯ ç›®æ ‡

ä¸ºæ¨¡å‹è¯„åˆ†å™¨æä¾›â€œä»€ä¹ˆæ˜¯å¥½çš„è§£å†³æ–¹æ¡ˆâ€çš„æ ‡å‡†ï¼Œä»è€Œå¸®åŠ©å®ƒç»™å‡ºæ›´æœ‰ä¾æ®çš„è¯„åˆ†ä¸è§£é‡Šã€‚

---

## ğŸ“Œ å®æ–½æ­¥éª¤

### æ­¥éª¤ä¸€ï¼šä¿®æ”¹æ•°æ®é›†ç”Ÿæˆæç¤ºè¯ï¼ŒåŠ å…¥â€œsolution_criteriaâ€å­—æ®µ

- æ‰“å¼€ `generate_dataset` å‡½æ•°ï¼Œæ‰¾åˆ°ä¹‹å‰ç”¨äºç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„æç¤ºè¯ã€‚
- ä¿®æ”¹æç¤ºè¯ï¼Œè®© Claude é™¤äº†è¿”å› `task` ä¸ `format`ï¼Œè¿˜è¿”å› `solution_criteria`ã€‚
- ç¤ºä¾‹æ ¼å¼ï¼š

```json
{
  "task": "åˆ›å»ºä¸€ä¸ª JSON é…ç½®",
  "format": "JSON",
  "solution_criteria": "åº”åŒ…å«å­—æ®µ Xï¼Œæ ¼å¼åº”ç¬¦åˆ AWS é…ç½®è§„èŒƒï¼Œå­—æ®µéœ€æ­£ç¡®åµŒå¥—"
}
```

- é‡æ–°è¿è¡Œè¯¥ cellï¼Œç”Ÿæˆæ›´æ–°åçš„æ•°æ®é›†æ–‡ä»¶ `dataset.json`ï¼Œå¹¶ç¡®è®¤æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½åŒ…å« `solution_criteria` å­—æ®µã€‚

---

### æ­¥éª¤äºŒï¼šå°† solution_criteria æ³¨å…¥åˆ°è¯„åˆ†æç¤ºè¯ä¸­

- æ‰¾åˆ° `grade_by_model` å‡½æ•°ã€‚
- åœ¨æ¨¡å‹è¯„åˆ†æç¤ºè¯ä¸­ï¼ŒåŸæœ¬åªåŒ…å«ï¼š
  - ä»»åŠ¡æè¿°ï¼ˆTaskï¼‰
  - AI ç”Ÿæˆçš„è§£å†³æ–¹æ¡ˆï¼ˆOutputï¼‰

- ç°åœ¨æ–°å¢ï¼š
  - ã€Œè¯„ä¼°æ ‡å‡†ã€è¯´æ˜æ®µè½ï¼Œå¦‚ï¼š`â€œä»¥ä¸‹æ˜¯è¯„ä¼°è¯¥è§£å†³æ–¹æ¡ˆçš„æ ‡å‡†ï¼šâ€`
  - æ’å…¥å¯¹åº”çš„ `solution_criteria` å†…å®¹ã€‚

---

## âœ… æ•ˆæœéªŒè¯

- é‡æ–°è¿è¡Œ `run_eval` å‡½æ•°ï¼Œæ‰§è¡Œæç¤ºè¯è¯„ä¼°æµç¨‹ã€‚
- ç”¨ `json.dumps(results, indent=2)` æ‰“å°ç»“æœï¼ŒæŸ¥çœ‹è¾“å‡ºå†…å®¹æ˜¯å¦æ›´åˆç†ï¼š
  - æ˜¯å¦åŒ…å«ä»»åŠ¡ã€è§£å†³æ–¹æ¡ˆã€solution_criteriaã€è¯„åˆ†ï¼ˆscoreï¼‰å’Œç†ç”±ï¼ˆreasoningï¼‰
  - è¯„åˆ†æ˜¯å¦æå‡ï¼Ÿ
  - Reasoning æ˜¯å¦æ›´å…·ä½“ã€ç¬¦åˆé¢„æœŸï¼Ÿ

---

## ğŸ“Œ å°ç»“

- æœ¬è¯¾é€šè¿‡å‘æ¨¡å‹è¯„åˆ†å™¨æä¾›æ›´å¤šâ€œå¥½æ–¹æ¡ˆçš„å‚è€ƒæ ‡å‡†â€ï¼Œä½¿è¯„åˆ†æ›´åŠ å¯é ã€é€æ˜ã€‚
- æå‡æç¤ºè¯æ•ˆæœçš„å…³é”®åœ¨äºæ¸…æ™°ä¼ è¾¾é¢„æœŸï¼Œé¿å…è¯„åˆ†æ—¶æ¨¡å‹â€œçŒœæµ‹æ ‡å‡†â€ã€‚


# 2025-08-06

æ‰“å¡

# 2025-08-05

# ç¬¬ 19 è¯¾ï¼šå®ç°ä»£ç  Grader

æœ¬è¯¾è®²è§£å¦‚ä½•å®ç° Prompt è¯„ä¼°å·¥ä½œæµä¸­çš„ä»£ç è¯„åˆ†å™¨ï¼ˆcode graderï¼‰ï¼Œç”¨äºéªŒè¯ Claude è¾“å‡ºæ˜¯å¦ç¬¦åˆæ ¼å¼è¦æ±‚ä¸”å…·å¤‡è¯­æ³•æ­£ç¡®æ€§ã€‚

---

## ğŸ¯ ç›®æ ‡

- åªæ¥å—ä»¥ä¸‹ä¸‰ç§æ ¼å¼è¾“å‡ºï¼šPythonã€JSONã€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰ã€‚
- ä¸¥æ ¼ç¦æ­¢ä»»ä½•è§£é‡Šã€æ³¨é‡Šã€å¤šä½™å†…å®¹ã€‚
- éªŒè¯è¾“å‡ºæ˜¯å¦å…·å¤‡è¯­æ³•æ­£ç¡®æ€§ï¼ˆä½¿ç”¨è§£æå™¨å°è¯• parse/compileï¼‰ã€‚

---

## âœ… å®ç°æ­¥éª¤

### Step 1ï¼šç¼–å†™ä¸‰ä¸ªéªŒè¯å‡½æ•°

åˆ›å»ºä¸‰ä¸ªå‡½æ•°ï¼š

- `validate_json(output)`ï¼šå°è¯•ä½¿ç”¨ `json.loads` è§£æã€‚
- `validate_python(output)`ï¼šå°è¯•ç”¨ Python çš„ AST è§£æä»£ç ã€‚
- `validate_regex(output)`ï¼šå°è¯•ç”¨ `re.compile()` ç¼–è¯‘æ­£åˆ™ã€‚

æ¯ä¸ªå‡½æ•°éƒ½è¿”å›åˆ†æ•°ï¼š
- æˆåŠŸè§£æåˆ™è¿”å› `10`
- å¦åˆ™è¿”å› `0`

ç„¶åå†™ä¸€ä¸ª `grade_syntax(output, test_case)` æ¥æ ¹æ® `test_case["format"]` è°ƒç”¨ç›¸åº”çš„éªŒè¯å‡½æ•°ã€‚

### Step 2ï¼šæ›´æ–°æ•°æ®é›†ï¼ŒåŠ å…¥ format å­—æ®µ

æ•°æ®é›†ä¸­çš„æ¯æ¡æµ‹è¯•ç”¨ä¾‹åŠ å…¥å­—æ®µï¼š
```json
{
  "task": "ç”Ÿæˆä¸€ä¸ª JSON é…ç½®æ–‡ä»¶",
  "format": "json"
}
```

æ”¯æŒä¸‰ç§æ ¼å¼å€¼ï¼š`python`ã€`json`ã€`regex`

é€šè¿‡æ›´æ–° `generate_dataset()` å‡½æ•°ä¸­çš„ promptï¼Œè‡ªåŠ¨ç”Ÿæˆå¸¦ format çš„æ•°æ®ã€‚

### Step 3ï¼šæ›´æ–° Draft Prompt æ¨¡æ¿

åŸå§‹ prompt åªè¦æ±‚â€œè§£å†³ä»»åŠ¡â€ï¼Œå¯èƒ½å¯¼è‡´ç”Ÿæˆå¤šä½™å†…å®¹ã€‚

ä¿®æ”¹ Promptï¼š
- æ˜ç¡®è¦æ±‚åªè¾“å‡ºä»£ç ï¼ˆPython/JSON/Regexï¼‰
- ä¸å…è®¸é™„åŠ è§£é‡Šã€æ³¨é‡Šã€æ ‡å¤´æˆ–å…¶ä»–æ— å…³ä¿¡æ¯
- ä½¿ç”¨é¢„å¡«çš„ Assistant Message + stop sequence å¼ºåˆ¶ Claude è¿”å›çº¯ä»£ç å—

ä½¿ç”¨è¯­è¨€æç¤ºï¼š```code å¼€å¤´å’Œ ``` ç»“å°¾ï¼Œé¿å…æŒ‡å®šå…·ä½“è¯­è¨€ç±»å‹ã€‚

### Step 4ï¼šåˆå¹¶æ¨¡å‹è¯„åˆ†å’Œè¯­æ³•è¯„åˆ†

æ›´æ–° `run_test_case()` å‡½æ•°ï¼š

```python
model_grade = grade_by_model(test_case, output)
model_score = model_grade["score"]
syntax_score = grade_syntax(output, test_case)
final_score = (model_score + syntax_score) / 2
```

æœ€åå°† `score` å’Œ `reasoning` æ”¾å…¥è¿”å›ç»“æœã€‚

---

## âœ… æµ‹è¯•ç»“æœ

æ‰§è¡Œ `run_eval()`ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```json
{
  "score": 8.166,
  "reasoning": "ç¬¦åˆæ ¼å¼è¦æ±‚ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘æ­£ç¡®"
}
```

---

## ğŸ“Œ å°ç»“

- ä»£ç  grader æ˜¯ prompt è¯„ä¼°ä¸­ä¸å¯ç¼ºå°‘çš„ä¸€ç¯ã€‚
- ä¸æ¨¡å‹ grader æ­é…ä½¿ç”¨å¯ä»¥æä¾›æ›´å®¢è§‚å…¨é¢çš„è¯„åˆ†ã€‚
- ä¸‹ä¸€è¯¾å°†å°è¯•ä¼˜åŒ– promptï¼Œæå‡è¯„ä¼°å¾—åˆ†ã€‚

# 2025-08-04

# ç¬¬ 18 è¯¾ï¼šå®ç° Model Grader

æœ¬è¯¾è®²è§£å¦‚ä½•åœ¨ Prompt Evaluation å·¥ä½œæµä¸­å®ç°åŸºäºæ¨¡å‹çš„è¯„åˆ†å™¨ï¼ˆModel Graderï¼‰ï¼Œä»¥å®ç°è‡ªåŠ¨åŒ–ã€å®¢è§‚çš„è¯„ä¼°æœºåˆ¶ã€‚

---

## ä¸€ã€è¯„åˆ†å™¨çš„ç›®æ ‡

è¯„åˆ†å™¨çš„ä½œç”¨æ˜¯å¯¹ Claude æ¨¡å‹çš„è¾“å‡ºè¿›è¡Œè¯„ä¼°ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå®¢è§‚çš„è¯„åˆ†ä¿¡å·ï¼Œé€šå¸¸æ˜¯ï¼š
- 1 åˆ° 10 çš„æ•´æ•°ï¼ˆ10è¡¨ç¤ºé«˜è´¨é‡ï¼Œ1è¡¨ç¤ºä½è´¨é‡ï¼‰
- æˆ–å¸ƒå°”å€¼ï¼ˆTrue/Falseï¼‰

è¯„åˆ†å€¼å¹¶éå¿…é¡»æ˜¯æ•°å­—ï¼Œä½†è¿™ç§æ–¹å¼éå¸¸å¸¸è§ã€‚

---

## äºŒã€è¯„åˆ†å™¨ç±»å‹

æœ¬è¯¾ç¨‹ä»‹ç»ä¸‰ç±»è¯„åˆ†å™¨ï¼š

### 1. ä»£ç è¯„åˆ†å™¨ï¼ˆCode Graderï¼‰
- ç”±å¼€å‘è€…ç¼–å†™ Python å‡½æ•°ï¼Œå¯¹è¾“å‡ºæ‰§è¡Œæ£€æŸ¥ã€‚
- å¯éªŒè¯ï¼š
  - è¾“å‡ºé•¿åº¦æ˜¯å¦åˆç†
  - æ˜¯å¦åŒ…å«æˆ–æ’é™¤æŸäº›å…³é”®å­—
  - è¯­æ³•æ˜¯å¦æœ‰æ•ˆï¼ˆé€‚ç”¨äº JSONã€ä»£ç ç­‰ï¼‰
  - å¯è¯»æ€§ã€é£æ ¼æˆ–å¤æ‚åº¦ç­‰é«˜çº§è§„åˆ™
- è¿”å›ä¸€ä¸ªè¯„åˆ†å€¼æˆ–å¸ƒå°”å€¼ã€‚

### 2. æ¨¡å‹è¯„åˆ†å™¨ï¼ˆModel Graderï¼‰
- ä½¿ç”¨å¦ä¸€ä¸ª Claude æ¨¡å‹è°ƒç”¨ï¼Œè¾“å…¥ä¸º prompt å’Œ outputã€‚
- å¯è¯„ä¼°ï¼š
  - æ˜¯å¦ç¬¦åˆæŒ‡ä»¤
  - å›ç­”æ˜¯å¦å®Œæ•´
  - é€»è¾‘æ˜¯å¦æ­£ç¡®
  - å“åº”çš„è´¨é‡
- çµæ´»æ€§å¼ºï¼Œè¿”å› 1~10 çš„è¯„åˆ†å€¼æ˜¯å¸¸è§æ–¹å¼ã€‚

### 3. äººå·¥è¯„åˆ†å™¨ï¼ˆHuman Graderï¼‰
- äººç±»è¯„ä¼°æ¨¡å‹çš„è¾“å‡ºã€‚
- ä¼˜ç‚¹ï¼šçµæ´»ï¼Œæ”¯æŒä¸»è§‚ã€å¤æ‚çš„è¯„ä¼°ç»´åº¦ã€‚
- ç¼ºç‚¹ï¼šè€—æ—¶ã€æˆæœ¬é«˜ã€æ•ˆç‡ä½ã€‚

---

## ä¸‰ã€è®¾è®¡è¯„åˆ†æ ‡å‡†ï¼ˆEvaluation Criteriaï¼‰

ä¸ºäº†ç»Ÿä¸€è¯„åˆ†é€»è¾‘ï¼Œéœ€è¦äº‹å…ˆå®šä¹‰æ¸…æ™°çš„è¯„ä¼°æ ‡å‡†ã€‚æœ¬è¯¾é€‰ç”¨ä»¥ä¸‹ä¸‰é¡¹ï¼š

1. **æ ¼å¼æ£€æŸ¥**ï¼š
   - è¾“å‡ºå¿…é¡»æ˜¯ Python / JSON / æ­£åˆ™è¡¨è¾¾å¼ä¹‹ä¸€ã€‚
   - ä¸åŒ…å«è§£é‡Šã€æ ‡é¢˜ç­‰æ— å…³å†…å®¹ã€‚
   - ç”¨ä»£ç è¯„åˆ†å™¨å®ç°ã€‚

2. **è¯­æ³•æ ¡éªŒ**ï¼š
   - ä¿è¯è¾“å‡ºè¯­æ³•æœ‰æ•ˆã€‚
   - ç”¨ä»£ç è¯„åˆ†å™¨å®ç°ã€‚

3. **ä»»åŠ¡å®Œæˆåº¦**ï¼š
   - åˆ¤æ–­æ¨¡å‹æ˜¯å¦ç¡®å®å®Œæˆäº†ç”¨æˆ·ä»»åŠ¡ã€‚
   - åˆ¤æ–­æ˜¯å¦æœ‰é‡å¤§é”™è¯¯æˆ–é—æ¼ã€‚
   - ä½¿ç”¨æ¨¡å‹è¯„åˆ†å™¨å®ç°ã€‚

---

## å››ã€å®ç°æ¨¡å‹è¯„åˆ†å™¨

### å‡½æ•°ç­¾åï¼š
```python
def grade_by_model(test_case: dict, output: str) -> dict
```

### å®ç°æ­¥éª¤ï¼š

1. æ„é€ è¯„åˆ†ç”¨ Promptï¼ˆå†…å®¹åŒ…æ‹¬ä»»åŠ¡æè¿°ã€è¾“å‡ºã€è¯„åˆ†æŒ‡ä»¤ç­‰ï¼‰
2. ä½¿ç”¨ `chat()` æ¥å£å‘é€ message åˆ—è¡¨ï¼Œé™„åŠ  assistant é¢„å¡«å’Œ stop sequence
3. è·å–å¹¶è§£æè¿”å›çš„ JSON ç»“æ„ï¼š
```json
{
  "score": 8,
  "reasoning": "è¾“å‡ºå†…å®¹åˆç†ä¸”æ— é€»è¾‘é”™è¯¯"
}
```

4. è¿”å›è¯¥ JSON å­—å…¸ä½œä¸ºè¯„åˆ†ç»“æœã€‚

---

## äº”ã€æ•´åˆè¿›æµ‹è¯•æµç¨‹

- ä¿®æ”¹ `run_test_case()` å‡½æ•°ï¼Œè°ƒç”¨ `grade_by_model()` æ›¿ä»£ç¡¬ç¼–ç è¯„åˆ†ã€‚
- å°† `score` ä¸ `reasoning` åˆå¹¶è¿›æœ€ç»ˆç»“æœå­—å…¸ä¸­ã€‚
- å¯é€‰ï¼šæå– `strengths` / `weaknesses` å­—æ®µåšæ›´æ·±å±‚åˆ†æã€‚

---

## å…­ã€æ±‡æ€»ç»“æœå¹¶è®¡ç®—å¹³å‡åˆ†

- ä¿®æ”¹ `run_eval()` å‡½æ•°ï¼š
  - éå†æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å¹¶è¯„åˆ†
  - æ±‡æ€»æ‰€æœ‰å¾—åˆ†
  - ä½¿ç”¨ Python æ ‡å‡†åº“ `statistics.mean()` è®¡ç®—å¹³å‡å¾—åˆ†
  - æ‰“å°æœ€ç»ˆå¹³å‡åˆ†ä½œä¸º prompt çš„å®¢è§‚è¡¨ç°æŒ‡æ ‡

---

## ä¸ƒã€ç»“æœç¤ºä¾‹

è¿è¡Œåæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¼šè¾“å‡ºï¼š
- Claude çš„å“åº”æ–‡æœ¬
- åŸå§‹ä»»åŠ¡å†…å®¹
- æ¨¡å‹è¯„åˆ†ï¼ˆå¦‚ 8ã€7ã€6ï¼‰
- è¯„åˆ†ç†ç”±

æœ€ç»ˆæ‰“å°å¹³å‡å¾—åˆ†ï¼Œä¾‹å¦‚ï¼š
```
Average Score: 7.33
```

---

## å°ç»“

æœ¬è¯¾å®Œæˆäº† Prompt è¯„ä¼°å·¥ä½œæµä¸­æœ€å…³é”®çš„ä¸€ç¯â€”â€”è¯„åˆ†å™¨çš„å®ç°ã€‚é€šè¿‡å¼•å…¥æ¨¡å‹è¯„åˆ†å™¨ï¼Œæˆ‘ä»¬èƒ½è·å–æ›´æ¥è¿‘çœŸå®çš„åé¦ˆï¼Œç”¨äºåç»­ prompt çš„è¿­ä»£ä¼˜åŒ–ã€‚

# 2025-08-03

# ç¬¬åäº”è¯¾ï¼šæ„å»º Prompt Evaluation æ•°æ®é›†ï¼ˆç”Ÿæˆå¼ï¼‰

æœ¬è¯¾æˆ‘ä»¬ç»§ç»­æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Prompt Evaluation æµç¨‹ï¼Œç›®æ ‡æ˜¯ç”Ÿæˆä¸€ä¸ªæœ‰æ•ˆçš„æ•°æ®é›†ç”¨äºåç»­æµ‹è¯•å’Œè¯„ä¼° prompt çš„æ€§èƒ½ã€‚

---

## ğŸ§  ç›®æ ‡

ç¼–å†™ä¸€ä¸ª promptï¼Œè®© Claude è¾“å‡ºä»¥ä¸‹ä¸‰ç§æ ¼å¼ä¹‹ä¸€çš„ä»£ç ï¼Œæ— é™„åŠ è¯´æ˜ï¼š

- Python å‡½æ•°
- JSON é…ç½®
- æ­£åˆ™è¡¨è¾¾å¼ï¼ˆraw regexï¼‰

---

## âœï¸ ç¬¬ä¸€æ­¥ï¼šç¼–å†™åˆå§‹ prompt

```text
"è¯·æä¾›ä»¥ä¸‹ä»»åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼š{task}"
```

è¯¥ prompt çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ taskï¼Œç”Ÿæˆä¸€æ®µç¬¦åˆè¦æ±‚çš„ä»£ç ï¼Œä¸è¦åŒ…å«è§£é‡Šè¯´æ˜æˆ–å…¶ä»–æ–‡æœ¬ã€‚

---

## ğŸ“¦ ç¬¬äºŒæ­¥ï¼šç”Ÿæˆæ•°æ®é›†

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾“å…¥æ•°æ®é›†ï¼Œå…¶ä¸­æ¯æ¡æ•°æ®æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼ŒåŒ…å«å­—æ®µ `task`ã€‚è¿™äº›ä»»åŠ¡å°†ä¼šè¢«æ’å…¥åˆ° prompt ä¸­æµ‹è¯• Claude çš„è¾“å‡ºã€‚

æ•°æ®é›†å¯ä»¥ï¼š

- æ‰‹åŠ¨ä¹¦å†™
- ä½¿ç”¨ Claude è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èä½¿ç”¨ Haiku æ¨¡å‹ï¼‰

---

## ğŸ”§ ä½¿ç”¨ Haiku è‡ªåŠ¨ç”Ÿæˆæ•°æ®é›†

ç¼–å†™å‡½æ•° `generate_dataset()`ï¼Œä½¿ç”¨ Claude + prefill + stop sequence çš„æ–¹å¼è·å–æ ‡å‡† JSON æ•°ç»„ï¼ŒåŒ…å«å¤šä¸ªä»»åŠ¡å¯¹è±¡ï¼š

```python
messages = []
add_user_message(messages, PROMPT)
add_assistant_message(messages, "```json")
text = chat(messages, stop_sequences=["```"])
return json.loads(text)
```

---

## ğŸ’¾ ä¿å­˜æ•°æ®é›†åˆ°æ–‡ä»¶

```python
with open("dataset.json", "w") as f:
    json.dump(dataset, f, indent=2)
```

ä¿å­˜åæˆ‘ä»¬å°±æœ‰ä¸€ä¸ªæ ‡å‡†åŒ–çš„è¾“å…¥æ•°æ®é›†ï¼Œå¯ä¾›åç»­è¯„ä¼°æµç¨‹å¤ç”¨ã€‚

---

## âœ… å°ç»“

- æœ¬èŠ‚è¯¾å®Œæˆäº† prompt åˆç¨¿ç¼–å†™
- ä½¿ç”¨ Claude ç”Ÿæˆäº†ç»“æ„åŒ–ä»»åŠ¡æ•°æ®é›†
- å¹¶å†™å…¥ dataset.json æ–‡ä»¶ï¼Œä¸ºåç»­ prompt è‡ªåŠ¨åŒ–è¯„ä¼°æ‰“å¥½åŸºç¡€

---

# ç¬¬åå…­è¯¾ï¼šæ‰§è¡Œ Prompt æµ‹è¯•å¹¶ç»„ç»‡è¯„ä¼°ç»“æœ

æœ¬è¯¾ç»§ç»­æ„å»ºè‡ªå®šä¹‰çš„ Prompt Evaluation æµç¨‹ï¼Œé‡ç‚¹æ˜¯å°†ç”Ÿæˆå¥½çš„æ•°æ®é›†ä¸ prompt åˆå¹¶ï¼Œæ‰¹é‡å‘é€è¯·æ±‚åˆ° Claudeï¼Œå¹¶ç»„ç»‡ç»“æœä»¥ä¾›åç»­è¯„åˆ†ï¼ˆgradingï¼‰ã€‚

## æ ¸å¿ƒæµç¨‹æ¦‚è§ˆ

æˆ‘ä»¬å®ç°äº†ä¸‰ä¸ªä¸»è¦å‡½æ•°ï¼š

---

### 1. `run_prompt(test_case)`

- è¾“å…¥ï¼šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆå³åŒ…å« `task` å­—æ®µçš„ JSON å¯¹è±¡ï¼‰
- åŠŸèƒ½ï¼šå°† `task` å†…å®¹æ’å…¥ prompt æ¨¡æ¿ä¸­ï¼Œæ„é€  user messageï¼Œè°ƒç”¨ Claude æ¥å£è·å¾—è¾“å‡ºã€‚
- å½“å‰ prompt ç¤ºä¾‹ï¼š

```python
f"Please solve the following task:\n{test_case['task']}"
```

- è¾“å‡ºï¼šClaude è¿”å›çš„ raw æ–‡æœ¬å†…å®¹ï¼ˆå°šæœªæ ¼å¼æ¸…æ´—ï¼‰

---

### 2. `run_test_case(test_case)`

- åŠŸèƒ½ï¼šè´Ÿè´£æ‰§è¡Œä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•æµç¨‹ï¼š
  - è°ƒç”¨ `run_prompt` è·å–è¾“å‡º
  - ï¼ˆTODOï¼‰è°ƒç”¨ grader è·å–è¯„åˆ†ï¼ˆå½“å‰ hardcode ä¸º 10ï¼‰
  - è¿”å›åŒ…æ‹¬è¾“å…¥ã€è¾“å‡ºã€è¯„åˆ†çš„å­—å…¸å¯¹è±¡ï¼š

```python
{
  "test_case": ...,
  "output": ...,
  "score": ...
}
```

---

### 3. `run_eval(dataset)`

- åŠŸèƒ½ï¼šå¯¹æ•´ä¸ªæ•°æ®é›†æ‰§è¡Œæµ‹è¯•æµç¨‹
  - è¯»å– `dataset.json`
  - éå†æ‰€æœ‰ test casesï¼Œè°ƒç”¨ `run_test_case`
  - è¿”å›æ‰€æœ‰ç»“æœç»„æˆçš„åˆ—è¡¨

---

## æ‰§è¡Œæµ‹è¯•

```python
with open("dataset.json") as f:
    dataset = json.load(f)

results = run_eval(dataset)
```

- è¾“å‡ºä¸ºå¤šä¸ªæµ‹è¯•ç»“æœç»„æˆçš„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºï¼š

```json
{
  "test_case": {"task": "..."},
  "output": "...",
  "score": 10
}
```

---

## å½“å‰è¿›å±•æ€»ç»“

- âœ… å·²å®Œæˆ prompt æ„é€ 
- âœ… æ•°æ®é›†ä¸ prompt åˆå¹¶å¹¶è°ƒç”¨ Claude
- âœ… åˆæ­¥æ”¶é›†è¯„ä¼°ç»“æœ
- âŒ è¯„åˆ†é€»è¾‘æœªå®ç°ï¼ˆä¸‹ä¸€è¯¾å¤„ç†ï¼‰

æ­¤é˜¶æ®µæˆ‘ä»¬å·²å®ç°å®Œæ•´çš„æµ‹è¯•æ‰§è¡Œç®¡é“ï¼Œä¸º grader è¯„åˆ†æ‰“ä¸‹äº†åŸºç¡€ã€‚

# 2025-08-02

# ç¬¬åäº”è¯¾ï¼šæ„å»º Prompt Evaluation æ•°æ®é›†ï¼ˆç”Ÿæˆå¼ï¼‰

æœ¬è¯¾æˆ‘ä»¬ç»§ç»­æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Prompt Evaluation æµç¨‹ï¼Œç›®æ ‡æ˜¯ç”Ÿæˆä¸€ä¸ªæœ‰æ•ˆçš„æ•°æ®é›†ç”¨äºåç»­æµ‹è¯•å’Œè¯„ä¼° prompt çš„æ€§èƒ½ã€‚

---

## ğŸ§  ç›®æ ‡

ç¼–å†™ä¸€ä¸ª promptï¼Œè®© Claude è¾“å‡ºä»¥ä¸‹ä¸‰ç§æ ¼å¼ä¹‹ä¸€çš„ä»£ç ï¼Œæ— é™„åŠ è¯´æ˜ï¼š

- Python å‡½æ•°
- JSON é…ç½®
- æ­£åˆ™è¡¨è¾¾å¼ï¼ˆraw regexï¼‰

---

## âœï¸ ç¬¬ä¸€æ­¥ï¼šç¼–å†™åˆå§‹ prompt

```text
"è¯·æä¾›ä»¥ä¸‹ä»»åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼š{task}"
```

è¯¥ prompt çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ taskï¼Œç”Ÿæˆä¸€æ®µç¬¦åˆè¦æ±‚çš„ä»£ç ï¼Œä¸è¦åŒ…å«è§£é‡Šè¯´æ˜æˆ–å…¶ä»–æ–‡æœ¬ã€‚

---

## ğŸ“¦ ç¬¬äºŒæ­¥ï¼šç”Ÿæˆæ•°æ®é›†

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾“å…¥æ•°æ®é›†ï¼Œå…¶ä¸­æ¯æ¡æ•°æ®æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼ŒåŒ…å«å­—æ®µ `task`ã€‚è¿™äº›ä»»åŠ¡å°†ä¼šè¢«æ’å…¥åˆ° prompt ä¸­æµ‹è¯• Claude çš„è¾“å‡ºã€‚

æ•°æ®é›†å¯ä»¥ï¼š

- æ‰‹åŠ¨ä¹¦å†™
- ä½¿ç”¨ Claude è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èä½¿ç”¨ Haiku æ¨¡å‹ï¼‰

---

## ğŸ”§ ä½¿ç”¨ Haiku è‡ªåŠ¨ç”Ÿæˆæ•°æ®é›†

ç¼–å†™å‡½æ•° `generate_dataset()`ï¼Œä½¿ç”¨ Claude + prefill + stop sequence çš„æ–¹å¼è·å–æ ‡å‡† JSON æ•°ç»„ï¼ŒåŒ…å«å¤šä¸ªä»»åŠ¡å¯¹è±¡ï¼š

```python
messages = []
add_user_message(messages, PROMPT)
add_assistant_message(messages, "```json")
text = chat(messages, stop_sequences=["```"])
return json.loads(text)
```

---

## ğŸ’¾ ä¿å­˜æ•°æ®é›†åˆ°æ–‡ä»¶

```python
with open("dataset.json", "w") as f:
    json.dump(dataset, f, indent=2)
```

ä¿å­˜åæˆ‘ä»¬å°±æœ‰ä¸€ä¸ªæ ‡å‡†åŒ–çš„è¾“å…¥æ•°æ®é›†ï¼Œå¯ä¾›åç»­è¯„ä¼°æµç¨‹å¤ç”¨ã€‚

---

## âœ… å°ç»“

- æœ¬èŠ‚è¯¾å®Œæˆäº† prompt åˆç¨¿ç¼–å†™
- ä½¿ç”¨ Claude ç”Ÿæˆäº†ç»“æ„åŒ–ä»»åŠ¡æ•°æ®é›†
- å¹¶å†™å…¥ dataset.json æ–‡ä»¶ï¼Œä¸ºåç»­ prompt è‡ªåŠ¨åŒ–è¯„ä¼°æ‰“å¥½åŸºç¡€

# 2025-08-01

ä¸‹é¢æ˜¯Prompt evaluationç« èŠ‚çš„ç¬¬ä¸€è¯¾

# ç¬¬åå››è¯¾ï¼šPrompt Evaluation ç®€ä»‹

## æœ¬èŠ‚ç›®æ ‡

æœ¬èŠ‚è¯¾ä¸»è¦ä»‹ç»ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š

- **Prompt Engineeringï¼ˆæç¤ºè¯å·¥ç¨‹ï¼‰**
- **Prompt Evaluationï¼ˆæç¤ºè¯è¯„ä¼°ï¼‰**

æˆ‘ä»¬å°†é‡ç‚¹å­¦ä¹ å¦‚ä½•è¯„ä¼°æç¤ºè¯çš„æ•ˆæœï¼Œä»¥åŠå¦‚ä½•åœ¨å·¥ç¨‹å®è·µä¸­é€‰æ‹©æ›´é«˜è´¨é‡çš„æç¤ºã€‚

---

## Prompt Engineering ä¸ Prompt Evaluation çš„åŒºåˆ«

| æ¦‚å¿µ | ä½œç”¨ |
|------|------|
| **Prompt Engineering** | ç¼–å†™æˆ–ä¿®æ”¹æç¤ºè¯çš„æŠ€æœ¯é›†åˆï¼Œç›®çš„æ˜¯è®© Claude æ›´å‡†ç¡®åœ°ç†è§£æˆ‘ä»¬çš„æ„å›¾å¹¶ç”ŸæˆæœŸæœ›çš„å“åº”ã€‚ |
| **Prompt Evaluation** | ä½¿ç”¨è‡ªåŠ¨åŒ–æ‰‹æ®µå¯¹æç¤ºè¯è¿›è¡Œæµ‹è¯•ï¼Œäº§å‡ºå®¢è§‚æŒ‡æ ‡ï¼ˆå¦‚è¯„åˆ†ã€å‡†ç¡®ç‡ç­‰ï¼‰æ¥è¡¡é‡æç¤ºè¯çš„æ•ˆæœã€‚ |

---

## ä¸ºä»€ä¹ˆéœ€è¦ Prompt Evaluationï¼Ÿ

å¤§å¤šæ•°äººå†™å®Œ prompt åé€šå¸¸èµ°è¿™ä¸‰ç§è·¯å¾„ä¹‹ä¸€ï¼š

1. å†™å®Œ promptï¼Œç®€å•æµ‹è¯•å‡ æ¬¡ï¼Œæ„Ÿè§‰è¿˜å¯ä»¥å°±ç›´æ¥ä¸Šçº¿ã€‚
2. å†™å®Œ promptï¼Œä½¿ç”¨å‡ ä¸ªè‡ªå®šä¹‰è¾“å…¥æµ‹è¯•åï¼Œå¾®è°ƒä»¥è¦†ç›–ä¸€äº›è¾¹ç¼˜æƒ…å†µã€‚
3. å†™å®Œ prompt åï¼Œå°†å…¶é€å…¥ **è¯„ä¼°æµç¨‹ï¼ˆevaluation pipelineï¼‰**ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•è·å¾—ä¸€ä¸ªå®¢è§‚åˆ†æ•°ï¼Œç„¶åå†è¿›è¡Œè¿­ä»£ä¼˜åŒ–ã€‚

:::info å»ºè®®
å‰ä¸¤ç§åšæ³•çœ‹ä¼¼çœäº‹ï¼Œå…¶å®æ˜¯**é™·é˜±**ï¼Œå¤§å¤šæ•°å·¥ç¨‹å¸ˆéƒ½ä¸­æ‹›è¿‡ã€‚å¦‚æœæç¤ºè¯å°†ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå¼ºçƒˆå»ºè®®èµ°ç¬¬ 3 æ¡è·¯çº¿ã€‚
:::

---

## å°ç»“

- Prompt Evaluation æ˜¯ prompt å¼€å‘æµç¨‹ä¸­çš„é‡è¦ä¸€ç¯ã€‚
- ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å®¢è§‚åœ°è¯„ä¼°æç¤ºè¯è´¨é‡ã€‚

# ç¬¬åäº”è¯¾ï¼šPrompt Evaluation æµç¨‹æ¦‚è§ˆ

æœ¬è¯¾ä»‹ç»äº†ä¸€ä¸ªå…¸å‹çš„ Prompt Evaluationï¼ˆæç¤ºè¯è¯„ä¼°ï¼‰å·¥ä½œæµç¨‹çš„å®Œæ•´æµç¨‹ï¼Œå¹¶å¼ºè°ƒäº†ä¸¤ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š

## å…³é”®å‰æ

1. **æ²¡æœ‰å›ºå®šæ ‡å‡†æµç¨‹**ï¼šä¸šç•Œå¹¶æ— ç»Ÿä¸€æ ‡å‡†ï¼Œä¸åŒå›¢é˜Ÿå¯æ ¹æ®å®é™…éœ€è¦è‡ªå®šä¹‰æµç¨‹ã€‚
2. **ä¸éœ€ä¾èµ–å¤æ‚å·¥å…·**ï¼šè¯„ä¼°å¯ä»¥ä»é›¶å¼€å§‹ç”¨ç®€å•ä»£ç å®ç°ï¼Œå†é€æ­¥æ¼”è¿›ä¸ºæˆç†Ÿæ–¹æ¡ˆã€‚

---

## Prompt Evaluation å·¥ä½œæµç¨‹æ­¥éª¤

### Step 1ï¼šç¼–å†™åˆå§‹ Prompt

ç¼–å†™ä¸€ä¸ªå¾…è¯„ä¼°çš„åŸºç¡€æç¤ºè¯ã€‚ä¾‹å¦‚ï¼š

```
è¯·å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼š{{user_question}}
```

### Step 2ï¼šå‡†å¤‡è¯„ä¼°æ•°æ®é›†

æ„å»ºè¾“å…¥æ ·æœ¬ï¼ˆå¦‚ç”¨æˆ·é—®é¢˜ï¼‰ï¼Œç”¨äºæ‰¹é‡æµ‹è¯• prompt çš„æ•ˆæœã€‚æ ·æœ¬æ•°é‡å¯ä»¥ä»å°‘é‡å¼€å§‹ï¼Œé€æ­¥æ‰©å±•è‡³æˆç™¾ä¸Šåƒæ¡ã€‚æ ·æœ¬å¯ä»¥æ‰‹å·¥æ„é€ ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© Claude ç”Ÿæˆã€‚

ç¤ºä¾‹ï¼š
```python
dataset = [
    "2+2 ç­‰äºå‡ ï¼Ÿ",
    "ç‡•éº¦ç²¥æ€ä¹ˆåšï¼Ÿ",
    "åœ°çƒåˆ°æœˆçƒçš„è·ç¦»æ˜¯å¤šå°‘ï¼Ÿ"
]
```

### Step 3ï¼šå¡«å…… Prompt + è·å–æ¨¡å‹è¾“å‡º

å°†æ¯ä¸ªæ ·æœ¬é—®é¢˜å¡«å…¥ prompt ä¸­ï¼Œç”Ÿæˆå®Œæ•´è¯·æ±‚æ–‡æœ¬ï¼Œå¹¶å‘é€ç»™ Claude è·å–å›ç­”ã€‚

```text
è¯·å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼š2+2 ç­‰äºå‡ ï¼Ÿ
```

å¯¹æ¯ä¸ªæ ·æœ¬é‡å¤æ‰§è¡Œï¼Œæ”¶é›†æ‰€æœ‰å›ç­”ã€‚

### Step 4ï¼šå¯¹è¾“å‡ºæ‰“åˆ†ï¼ˆè¯„åˆ†å™¨ï¼‰

å°†æ¯æ¡é—®é¢˜ä¸å¯¹åº”å›ç­”ä¼ å…¥è¯„åˆ†å™¨ï¼ˆgraderï¼‰ï¼Œè¾“å‡ºä¸€ä¸ª 1~10 çš„åˆ†æ•°ï¼Œè¡¡é‡å›ç­”è´¨é‡ã€‚

- 10 åˆ†ï¼šå‡ ä¹å®Œç¾ï¼Œæ— éœ€æ”¹è¿›ã€‚
- 4 åˆ†ï¼šéœ€è¦æ˜æ˜¾ä¼˜åŒ–ã€‚

è¯„åˆ†å™¨å®ç°æ–¹å¼å¤šç§å¤šæ ·ï¼Œåç»­è¯¾ç¨‹ä¼šè¯¦ç»†è®²è§£ã€‚

### Step 5ï¼šè®¡ç®—å¹³å‡å¾—åˆ†

å¯¹æ‰€æœ‰è¯„åˆ†æ±‚å¹³å‡å€¼ï¼Œå¾—åˆ°è¯¥ prompt çš„â€œå®¢è§‚è´¨é‡æŒ‡æ ‡â€ã€‚

ä¾‹å¦‚ï¼š
```text
è¯„åˆ†ç»“æœ = [10, 7, 6] â†’ å¹³å‡åˆ† = 7.66
```

### Step 6ï¼šè¿­ä»£ä¼˜åŒ– Prompt

åŸºäºè¯„åˆ†ç»“æœè°ƒæ•´ promptï¼Œä¾‹å¦‚æ·»åŠ æ›´å¤šå¼•å¯¼ä¿¡æ¯ï¼Œå¼•å¯¼æ¨¡å‹äº§å‡ºæ›´æ¸…æ™°æˆ–æ›´è¯¦ç»†çš„å›ç­”ã€‚

ç¤ºä¾‹æ”¹è¿›ï¼š
```text
è¯·è¯¦ç»†å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚
```

å†é‡å¤æ•´ä¸ªæµç¨‹ï¼Œæ¯”è¾ƒ V1 ä¸ V2 æç¤ºè¯å¾—åˆ†ï¼Œä»¥ç¡®å®šå“ªä¸€ä¸ªæ•ˆæœæ›´å¥½ã€‚

---

## æ€»ç»“

Prompt Evaluation çš„å…³é”®æµç¨‹ä¸ºï¼š

1. å†™ Prompt
2. å‡†å¤‡æ•°æ®é›†
3. è¿è¡Œç”Ÿæˆ
4. è‡ªåŠ¨æ‰“åˆ†
5. æ±‚å¹³å‡åˆ†
6. è¿­ä»£ä¼˜åŒ–

# 2025-07-30

# ğŸ§  ç¬¬åä¸€è¯¾ï¼šé¢„å¡«æ¶ˆæ¯ & åœæ­¢åºåˆ—ï¼ˆControlling Claude's Outputï¼‰

---

## ğŸ¯ æœ¬è¯¾ç›®æ ‡

- å­¦ä¼šä½¿ç”¨ **Assistant Message é¢„å¡«ï¼ˆPre-fillingï¼‰** å¼•å¯¼ Claude è¾“å‡ºå€¾å‘
- å­¦ä¼šä½¿ç”¨ **Stop Sequences** æ§åˆ¶ Claude ç”Ÿæˆä¸­æ­¢ä½ç½®

---

## 1ï¸âƒ£ Assistant Message é¢„å¡«ï¼ˆPre-fillingï¼‰

### ğŸ¤” èƒŒæ™¯åœºæ™¯

æé—®ï¼š
```
"Is tea or coffee better at breakfast?"
```

Claude é»˜è®¤è¿”å›ä¸­ç«‹å›ç­”ï¼ˆä¾‹å¦‚ï¼šä¸¤è€…çš†æœ‰ä¼˜ç‚¹ï¼‰ã€‚

### ğŸ¯ ç›®æ ‡ï¼šå¼•å¯¼ Claude ç«‹åœº

é€šè¿‡â€œé¢„å¡«åŠ©æ‰‹æ¶ˆæ¯â€æ¨¡æ‹Ÿ Claude çš„â€œè‡ªæˆ‘æš—ç¤ºâ€è¡Œä¸ºï¼š

```python
add_user_message(messages, "Is tea or coffee better at breakfast?")
add_assistant_message(messages, "Coffee is better because")
response = chat(messages)
```

Claude ä¼šè‡ªåŠ¨å°† `"Coffee is better because"` å½“ä½œå®ƒè‡ªå·±â€œåˆšåˆšè¯´å‡ºâ€çš„éƒ¨åˆ†ï¼Œç„¶åç»­å†™ä¸‹å»ï¼Œå¦‚ï¼š

```
Coffee is better because it contains more caffeine and helps kickstart your day.
```

### ğŸ’¡ å¯æ›¿æ¢ä¸åŒå¼•å¯¼æ–¹å‘

```python
add_assistant_message(messages, "Tea is better because")
add_assistant_message(messages, "Neither is very good because")
```

---

## 2ï¸âƒ£ Stop Sequencesï¼ˆåœæ­¢ç”Ÿæˆçš„æ§åˆ¶ç¬¦ï¼‰

### ğŸ›‘ åœºæ™¯è¯´æ˜

ä½ å¸Œæœ› Claude çš„è¾“å‡ºåœ¨é‡åˆ°ç‰¹å®šå­—ç¬¦ä¸²æ—¶ç«‹å³ä¸­æ­¢ã€‚

ä¾‹å¦‚ï¼š

```python
add_user_message(messages, "Count from 1 to 10")
chat(messages, stop_sequences=["5"])
```

Claude ä¸€æ—¦ç”Ÿæˆ `"5"`ï¼Œå°†ç«‹å³ç»ˆæ­¢è¾“å‡ºã€‚**æ³¨æ„ï¼šåŒ…å« stop åºåˆ—çš„ token æœ¬èº«ä¸ä¼šå‡ºç°åœ¨è¿”å›ç»“æœä¸­ã€‚**

### ğŸ§ª ç¤ºä¾‹ä¼˜åŒ–

å¦‚æœå¸Œæœ›åœæ­¢åœ¨ `" , 5"`ï¼Œé¿å…ä¿ç•™å‰ç¼€æ ‡ç‚¹ï¼Œå¯è®¾ç½®ï¼š

```python
stop_sequences=[", 5"]
```

---

## ğŸ”§ æŠ€æœ¯å®ç°å°ç»“

| æŠ€æœ¯ | ä½¿ç”¨æ–¹å¼ | åº”ç”¨åœºæ™¯ |
|------|----------|----------|
| Assistant é¢„å¡« | `add_assistant_message` | å¼•å¯¼ç”Ÿæˆæ–¹å‘ã€ä¿æŒé£æ ¼ä¸€è‡´ |
| Stop Sequences | `chat(..., stop_sequences=["æ ‡è®°"])` | é™å®šç”ŸæˆèŒƒå›´ã€ç”¨äºæ§åˆ¶è¾“å‡ºæˆªæ–­ï¼ˆå¦‚è„±æ•ã€æ ¼å¼åŒ–ï¼‰ |

---

## ğŸ§° chat() å‡½æ•°å¢å¼ºå»ºè®®

åœ¨ `chat()` å‡½æ•°ç­¾åä¸­åŠ å…¥ï¼š

```python
def chat(messages, system=None, temperature=1.0, stop_sequences=[]):
    ...
    if stop_sequences:
        params["stop_sequences"] = stop_sequences
```

å³å¯æ”¯æŒå®Œæ•´çš„åœç”¨è¯åŠŸèƒ½ã€‚

---

ğŸ“Œ **è¿™ä¸€è¯¾å±•ç¤ºäº†ä»…é  prompt æ— æ³•å®ç°çš„é«˜çº§æ§åˆ¶æŠ€æœ¯ï¼Œé€‚ç”¨äºæ›´å¤æ‚æˆ–æ›´é«˜è¦æ±‚çš„ç”Ÿæˆåœºæ™¯ã€‚**
# ç¬¬åäºŒè¯¾ï¼šç»“åˆä½¿ç”¨ Assistant Message é¢„å¡«å…… ä¸ Stop Sequence

åœ¨ä½¿ç”¨ Claude ç”Ÿæˆç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ JSONã€Python ä»£ç æˆ–åˆ—è¡¨ï¼‰æ—¶ï¼ŒClaude å¾€å¾€ä¼šåœ¨è¿”å›å†…å®¹ä¸­æ·»åŠ é¢å¤–çš„è¯´æ˜ã€å¤´éƒ¨æˆ–æ³¨é‡Šä¿¡æ¯ã€‚è¿™åœ¨æŸäº›åœºæ™¯ä¸‹ä¼šç ´åç”¨æˆ·ä½“éªŒï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬åªæƒ³è·å–**çº¯ç²¹çš„ç»“æ„åŒ–è¾“å‡º**æ—¶ã€‚

## è§£å†³æ–¹æ¡ˆï¼šé¢„å¡«å…… + Stop Sequence

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆä½¿ç”¨ï¼š

- **Assistant Message é¢„å¡«å……**ï¼šäººä¸ºæŒ‡å®š Claude å›åº”çš„èµ·å§‹ç‰‡æ®µã€‚
- **Stop Sequences**ï¼šæŒ‡å®š Claude é‡åˆ°ç‰¹å®šå­—ç¬¦ä¸²æ—¶ç«‹åˆ»åœæ­¢è¾“å‡ºã€‚

## ç¤ºä¾‹ï¼šç”Ÿæˆ AWS EventBridge JSON è§„åˆ™

è®¾æƒ³æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ª Web åº”ç”¨ï¼Œç”¨æˆ·è¾“å…¥éœ€æ±‚åç‚¹å‡»â€œç”Ÿæˆâ€ï¼Œå¸Œæœ›å¾—åˆ°ä¸€æ®µ EventBridge è§„åˆ™ï¼ˆJSON æ ¼å¼ï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›è¾“å‡º **åªåŒ…å« JSON**ï¼Œä¸åŒ…å«æ³¨é‡Šæˆ– Markdown æ ¼å¼ã€‚

### ä¸åŠ æ§åˆ¶çš„è¾“å‡ºé—®é¢˜

Claude é»˜è®¤å¯èƒ½è¿”å›å¦‚ä¸‹æ ¼å¼ï¼š

```
```json
{
  "source": ["aws.ec2"],
  ...
}
``` 
```

è¿™ç§åŒ…å« Markdown ä»£ç å—æ ‡è®°ï¼ˆ```ï¼‰çš„è¾“å‡ºä¸åˆ©äºç¨‹åºæå–çº¯ç²¹å†…å®¹ã€‚

### è§£å†³æ–¹æ¡ˆä»£ç å®ç°

```python
messages = []
add_user_message(messages, "Generate a very short EventBridge rule as JSON.")
add_assistant_message(messages, "```json")  # é¢„å¡«å……å¼€å¤´
response = chat(messages, stop_sequences=["```"])  # è®¾ç½®åœæ­¢æ ‡è®°
```

Claude ä¼šè®¤ä¸ºè‡ªå·±å·²ç»å¼€å§‹å†™ JSONï¼Œå› æ­¤ä¸ä¼šæ·»åŠ è§£é‡Šæ€§è¯­è¨€ã€‚é‡åˆ°ç»“å°¾çš„ ``` æ—¶ç«‹åˆ»åœæ­¢è¾“å‡ºã€‚

æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨ `json.loads()` å’Œ `strip()` å¯¹è¾“å‡ºåšæ¸…ç†ï¼š

```python
import json
cleaned = json.loads(response.strip())
```

## åŸç†è§£æå›¾è§£ï¼ˆç®€è¦ï¼‰

- Claude æ¥æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯ï¼Œå‡†å¤‡å†™è§„åˆ™ã€‚
- é‡åˆ° assistant é¢„å¡«å…… `"```json"`ï¼Œè®¤ä¸ºè‡ªå·±å·²ç»å¼€å§‹å†™ JSONã€‚
- æŒ‰ç…§ JSON å†™å…¥å†…å®¹ã€‚
- ä¸€æ—¦ç”Ÿæˆç»“å°¾çš„ `"```"`ï¼Œè§¦å‘ stop sequenceï¼Œç«‹å³ç»ˆæ­¢è¾“å‡ºã€‚

## åº”ç”¨åœºæ™¯

æ­¤æŠ€æœ¯éå¸¸é€‚ç”¨äºç”Ÿæˆä»¥ä¸‹ç»“æ„åŒ–æ•°æ®æ—¶ï¼š

- JSON / XML / YAML
- Pythonã€Shell ç­‰ä»£ç æ®µ
- Markdown åˆ—è¡¨ã€è¡¨æ ¼
- SQL è¯­å¥ã€é…ç½®ç‰‡æ®µç­‰

ç›®æ ‡æ˜¯**è·å–çº¯å‡€å†…å®¹ï¼Œæ— å¤´å°¾æ³¨é‡Šã€æ— è§£é‡Šæ€§æè¿°**ã€‚

---

> âœ… å»ºè®®åœ¨æ‰€æœ‰ç»“æ„åŒ–è¾“å‡ºéœ€æ±‚ä¸­é‡‡ç”¨ Assistant é¢„å¡«å…… + Stop Sequences ç»„åˆã€‚
# ç¬¬åä¸‰è¯¾ï¼šç»ƒä¹  Stop Sequence ä¸ Assistant Message é¢„å¡«

æœ¬è¯¾æ˜¯å¯¹ä¸Šä¸€è¯¾å†…å®¹çš„ç»ƒä¹ ï¼Œç›®æ ‡æ˜¯ç†Ÿç»ƒæŒæ¡å¦‚ä½•ä½¿ç”¨ Stop Sequence å’Œ Assistant é¢„å¡«ï¼ˆPrefillï¼‰æ§åˆ¶ Claude çš„è¾“å‡ºæ ¼å¼ï¼Œç‰¹åˆ«æ˜¯è¾“å‡ºç»“æ„åŒ–å†…å®¹ï¼ˆå¦‚å‘½ä»¤åˆ—è¡¨ï¼‰æ—¶é¿å…å†—ä½™è¯´æ˜æˆ–å¤šä½™æ ¼å¼ã€‚

---

## ğŸ¯ ç›®æ ‡

- é€šè¿‡ Claude ç”Ÿæˆä¸‰ä¸ª AWS CLI ç¤ºä¾‹å‘½ä»¤
- è¾“å‡ºä¸­ä¸èƒ½åŒ…å«è¯´æ˜æ–‡å­—ã€æ³¨é‡Šæˆ–æ ¼å¼åŒ–æ ‡ç­¾ï¼ˆå¦‚ Markdown æ ‡é¢˜ï¼‰

---

## ğŸ§ª åˆå§‹å°è¯•ï¼ˆé”™è¯¯ç¤ºèŒƒï¼‰

ä½¿ç”¨å¦‚ä¸‹ promptï¼š

```
generate three different sample AWS CLI commands
```

Claude ä¼šè¿”å›ï¼š

- é¡¶éƒ¨æœ‰è¯´æ˜æ€§æ–‡å­—
- æ¯ä¸ªå‘½ä»¤å‰æœ‰ç¼–å·æˆ–æ³¨é‡Š
- è¢« Markdown çš„ ``` åŒ…è£¹

è¿™äº›éƒ½æ˜¯æˆ‘ä»¬ä¸æƒ³è¦çš„ã€‚

---

## âœ… æ­£ç¡®åšæ³•

### 1. ä½¿ç”¨ Assistant Message é¢„å¡«æ§åˆ¶æ ¼å¼

é¢„å¡«å†…å®¹ï¼š

```
```bash
```

å«ä¹‰æ˜¯å‘Šè¯‰ Claudeï¼š
> â€œä½ å·²ç»å¼€å§‹å†™ Markdown ä»£ç å—ï¼Œå¹¶ä½¿ç”¨ bash è¯­æ³•é«˜äº®â€

Claude ä¼šç´§æ¥ç€å¼€å§‹ç”Ÿæˆå‘½ä»¤å†…å®¹ã€‚

### 2. ä½¿ç”¨ Stop Sequence æ§åˆ¶ç»“å°¾

è®¾ç½® stop sequence ä¸ºï¼š

```
```ï¼ˆä¸‰ä¸ªåå¼•å·ï¼‰
```

è¿™æ · Claude ä¼šåœ¨è¾“å‡ºåˆ° ``` æ—¶ç«‹åˆ»ä¸­æ–­ï¼Œé¿å…è¾“å‡ºç»“æŸè¯­æˆ–è¯´æ˜ã€‚

---

## ğŸ’¡ æœ€ä½³å†™æ³•

é¢„å¡«å†…å®¹å¦‚ä¸‹ï¼š

```
Here are all three commands in a single block without any comments:
```bash
```

æ³¨æ„ï¼š

- æ˜ç¡®å‘Šè¯‰ Claude æˆ‘ä»¬è¦â€œå•ä¸€ä»£ç å—ã€æ— æ³¨é‡Šâ€
- æ¢è¡Œåå†æ¥ä»£ç æ ¼å¼ï¼Œæœ‰åŠ©äºé¿å…å¼€å¤´æ’å…¥è¯´æ˜

é…åˆ stop sequence ``` ï¼ŒClaude å°†ä»…ç”Ÿæˆå‘½ä»¤æœ¬ä½“ã€‚

---

## ğŸ§¾ ç¤ºä¾‹è¾“å‡ºï¼ˆç¬¦åˆé¢„æœŸï¼‰

```bash
aws s3 ls
aws ec2 describe-instances
aws lambda list-functions
```

æ— æ ‡é¢˜ã€æ— ç¼–å·ã€æ— æ³¨é‡Šã€æ— å¤šä½™å†…å®¹ã€‚ç¬¦åˆç»“æ„åŒ–è¾“å‡ºåœºæ™¯éœ€æ±‚ã€‚

---

## âœ… å°ç»“

- ä½¿ç”¨ assistant message é¢„å¡«æ˜ç¡® Claude çš„èµ·å§‹è¾“å‡ºæ ¼å¼
- ä½¿ç”¨ stop sequence æ§åˆ¶ç»ˆæ­¢æ—¶æœºï¼Œé¿å…ç»“å°¾åºŸè¯
- é’ˆå¯¹ç»“æ„åŒ–è¾“å‡ºï¼ˆä»£ç å—ã€JSONã€åˆ—è¡¨ç­‰ï¼‰è¿™æ˜¯é€šç”¨åšæ³•

# 2025-07-29

# ğŸ§  ç¬¬ä¹è¯¾ï¼šç†è§£ Claude çš„ Temperature å‚æ•°

## ğŸ”„ Claude çš„æ–‡æœ¬ç”Ÿæˆæµç¨‹å›é¡¾

Claude ç”Ÿæˆæ–‡æœ¬çš„å…¸å‹æµç¨‹ï¼š

1. **æ¥æ”¶è¾“å…¥æ–‡æœ¬**
   - ä¾‹å­ï¼š"What do you think"

2. **Tokenize**ï¼ˆåˆ†è¯ï¼‰
   - å°†å¥å­æ‹†æˆæ›´å°çš„ tokenï¼ˆè¯­ä¹‰å•ä½ï¼‰

3. **é¢„æµ‹ä¸‹ä¸€ä¸ª token çš„æ¦‚ç‡åˆ†å¸ƒ**
   - å¯èƒ½æ˜¯ï¼š"about", "would", "of" ç­‰
   - æ¯ä¸ª token æœ‰ä¸€ä¸ªæ¦‚ç‡å€¼

4. **é‡‡æ ·ï¼ˆSamplingï¼‰**
   - æ ¹æ®æ¦‚ç‡åˆ†å¸ƒé€‰æ‹©ä¸€ä¸ª tokenï¼Œä½œä¸ºä¸‹ä¸€ä¸ªè¯

5. **é‡å¤æ­¥éª¤ 2~4** ç›´åˆ°ç”Ÿæˆå®Œæ•´å›ç­”

---

## ğŸ› Temperature æ§åˆ¶ï¼šå½±å“é‡‡æ ·çš„â€œéšæœºæ€§â€

**å‚æ•°èŒƒå›´ï¼š** `0.0 ~ 1.0`  
**é»˜è®¤å€¼ï¼š** `1.0`

### ä½œç”¨ï¼š

- æ§åˆ¶æ¨¡å‹åœ¨ç”Ÿæˆæ–‡æœ¬æ—¶çš„â€œåˆ›é€ åŠ›â€
- **ä½æ¸©åº¦ï¼ˆå¦‚ 0.0ï¼‰**ï¼š
  - æ›´ç¡®å®šæ€§ï¼ˆæ€»æ˜¯é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„ tokenï¼‰
  - è¾“å‡ºç¨³å®šã€ä¸€è‡´æ€§å¼º
- **é«˜æ¸©åº¦ï¼ˆå¦‚ 1.0ï¼‰**ï¼š
  - æ›´å¤šæ ·åŒ–ã€åˆ›é€ åŠ›å¼º
  - è¾“å‡ºæ›´ä¸å¯é¢„æµ‹

---

## ğŸ“Š å›¾ç¤ºç†è§£

| Temperature | æ•ˆæœ |
|-------------|------|
| 0.0         | å®Œå…¨ç¡®å®šæ€§ï¼Œå§‹ç»ˆè¾“å‡ºæœ€é«˜æ¦‚ç‡è¯ |
| 0.3         | è½»å¾®å¤šæ ·æ€§ |
| 0.7         | å¹³è¡¡ç¨³å®šæ€§ä¸åˆ›é€ æ€§ |
| 1.0         | é«˜åˆ›é€ æ€§ã€æ›´å‘æ•£ |

---

## ğŸ§ª ç¤ºä¾‹ï¼šä¸€è¡Œç”µå½±ç‚¹å­ç”Ÿæˆ

**Promptï¼š** "Give me a one-sentence movie idea"

### Temperature = 0.0

- "A time-traveling archaeologist discovers..."
- "A time-traveling historian battles..."

é‡å¤å‡ºç° â€œtime-travelingâ€ çš„å†…å®¹ã€‚

### Temperature = 1.0

- "An AI comedian trapped in a joke simulation"
- "A city made entirely of forgotten dreams"

æ›´å¯Œæƒ³è±¡åŠ›ã€å¤šæ ·åŒ–ã€‚

---

## ğŸ”§ ä»£ç ä¿®æ”¹æ”¯æŒ temperature å‚æ•°

### ä¿®æ”¹ chat å‡½æ•°ï¼š

```python
def chat(messages, system=None, temperature=1.0):
    params = {
        "model": model,
        "max_tokens": 1000,
        "messages": messages,
        "temperature": temperature
    }
    if system is not None:
        params["system"] = system
    response = client.messages.create(**params)
    return response.content[0].text
```

---

## âœ… æ€»ç»“

| ä»»åŠ¡ç±»å‹         | æ¨è Temperature |
|------------------|------------------|
| æ•°æ®æŠ½å–ã€é—®ç­”   | 0.0 ~ 0.3        |
| å†…å®¹ç”Ÿæˆï¼ˆå†™ä½œï¼‰ | 0.7 ~ 1.0        |
| è¥é”€ã€åˆ›æ„å†…å®¹   | 0.9 ~ 1.0        |
| ä»£ç ç”Ÿæˆ         | 0.2 ~ 0.6        |

åˆç†è®¾ç½® temperature èƒ½æ›´å¥½åœ°æ§åˆ¶ Claude çš„å“åº”é£æ ¼å’Œç¨³å®šæ€§ã€‚

---

# ğŸ”„ ç¬¬åè¯¾ï¼šä½¿ç”¨ Claude Streaming å®ç°å®æ—¶å“åº”

## ğŸ¯ é—®é¢˜èƒŒæ™¯

Claude ä¼ ç»Ÿæ¥å£å­˜åœ¨å“åº”å»¶è¿Ÿï¼š

```text
ç”¨æˆ·æäº¤ âœ Claude ç”Ÿæˆå®Œæ•´å†…å®¹ âœ è¿”å› âœ é¡µé¢æ‰å±•ç¤º
```

è¿™åœ¨ç”¨æˆ·è¾“å…¥å’Œè¾“å‡ºéƒ½è¾ƒé•¿æ—¶ï¼Œä¼šé€ æˆ**10~30 ç§’ç­‰å¾…**ï¼Œä½“éªŒå·®ã€‚

---

## âš¡ è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Claude çš„ Streaming API

### æµå¼äº¤äº’æµç¨‹

```text
ç”¨æˆ·è¾“å…¥ âœ Claude æ¥æ”¶è¯·æ±‚ âœ å®æ—¶è¿”å› token å— âœ é¡µé¢é€æ­¥æ˜¾ç¤º
```

---

## ğŸ§© Streaming å“åº”ç»“æ„

Claude çš„å“åº”æ˜¯ä¸€ç³»åˆ—äº‹ä»¶æµï¼š

1. `message_start`
2. `content_block_start`
3. `content_block_delta` âœ…ï¼ˆå«çœŸå®å†…å®¹ï¼‰
4. `content_block_stop`
5. `message_delta`
6. `message_stop`

æˆ‘ä»¬ä¸»è¦æå– `content_block_delta` ä¸­çš„æ–‡æœ¬ç‰‡æ®µã€‚

---

## ğŸ§ª ç¤ºä¾‹ 1ï¼šæ‰“å°åŸå§‹äº‹ä»¶

```python
stream = client.messages.create(
    model=model,
    max_tokens=1000,
    messages=messages,
    stream=True
)

for event in stream:
    print(event)
```

---

## ğŸ§ª ç¤ºä¾‹ 2ï¼šæå–çº¯æ–‡æœ¬

Anthropic SDK æä¾› `.text_stream` ç®€åŒ–æ“ä½œï¼š

```python
with client.messages.stream(
    model=model,
    max_tokens=1000,
    messages=messages
) as stream:
    for text in stream.text_stream:
        print(text, end="")
```

---

## ğŸ§ª ç¤ºä¾‹ 3ï¼šæ”¶é›†å®Œæ•´å“åº”

å¯ç”¨äºå†™æ•°æ®åº“ï¼š

```python
with client.messages.stream(
    model=model,
    max_tokens=1000,
    messages=messages
) as stream:
    for _ in stream.text_stream:
        pass  # å®æ—¶æ˜¾ç¤º

    full_message = stream.get_final_message()
    # å­˜å…¥æ•°æ®åº“æˆ–è¿›ä¸€æ­¥å¤„ç†
```

---

## ğŸ“Œ æ€»ç»“

| åŠŸèƒ½               | æ–¹æ³•                             |
|--------------------|----------------------------------|
| å¯ç”¨æµå¼å“åº”       | `stream=True`                    |
| æå–æ–‡æœ¬å—         | `for text in stream.text_stream` |
| æ”¶é›†å®Œæ•´æ¶ˆæ¯       | `stream.get_final_message()`     |

ä½¿ç”¨ Streaming å¯å¤§å¹…æå‡å“åº”ä½“éªŒï¼Œæ˜¯æ„å»ºå®æ—¶èŠå¤©ä½“éªŒçš„å…³é”®ã€‚

# 2025-07-27

# ğŸ§‘â€ğŸ« ç¬¬ä¸ƒè¯¾ï¼šä½¿ç”¨ System Prompt è‡ªå®šä¹‰ Claude å›ç­”é£æ ¼

---

## ğŸ¯ è¯¾ç¨‹ç›®æ ‡

- å­¦ä¼šæ§åˆ¶ Claude çš„è¯­æ°”ã€é£æ ¼å’Œè¡Œä¸º
- ç†è§£å¹¶ä½¿ç”¨ `system prompt` æŒ‡å¯¼ Claude
- æ”¯æŒä¸åŒåœºæ™¯ä¸‹çš„è§’è‰²è®¾å®šï¼ˆå¦‚æ•™å­¦è¾…åŠ©ã€å®¢æœã€åŠ©æ‰‹ç­‰ï¼‰
- é‡æ„ `chat()` å‡½æ•°æ”¯æŒå¯é€‰ç³»ç»Ÿæç¤ºå‚æ•°

---

## ğŸ¤” ä½¿ç”¨åœºæ™¯ï¼šæ•°å­¦å®¶æ•™æœºå™¨äºº

ç›®æ ‡åœºæ™¯è®¾å®šï¼š

- Claude æ˜¯ä¸€ä½è€å¿ƒçš„æ•°å­¦å¯¼å¸ˆ
- å­¦ç”Ÿæé—®å¦‚ï¼š`5x + 2 = 3 æ€ä¹ˆè§£ï¼Ÿ`
- Claude ä¸èƒ½ç›´æ¥ç»™å‡ºç­”æ¡ˆï¼Œè€Œæ˜¯è¦ï¼š
  - æä¾›æç¤ºï¼ˆhintsï¼‰
  - å±•ç¤ºç›¸ä¼¼é—®é¢˜çš„è§£æ³•
  - åˆ†æ­¥å¼•å¯¼æ¨ç†è¿‡ç¨‹
- âŒ ä¸å…è®¸ï¼š
  - ç›´æ¥ç»™å‡ºç­”æ¡ˆ
  - å»ºè®®ç”¨è®¡ç®—å™¨åº”ä»˜

---

## âœ¨ System Prompt æ˜¯ä»€ä¹ˆï¼Ÿ

- ä¸€æ®µ**å­—ç¬¦ä¸²æè¿°**
- å‘Šè¯‰ Claude åº”è¯¥**æ‰®æ¼”ä»€ä¹ˆè§’è‰²**ã€**å¦‚ä½•å›ç­”**
- ä½œä¸ºå‚æ•° `system` ä¼ å…¥ Claude çš„ `create()` æ–¹æ³•ä¸­

### ç¤ºä¾‹ï¼š

```python
system = '''
You are a patient and encouraging math tutor.
Never give direct answers.
Instead, guide the student step by step through reasoning.
'''
```

---

## âš™ï¸ Claude çš„å¯¹æ¯”å®éªŒ

### ğŸš« æ—  System Promptï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ï¼š

```python
messages = []
add_user_message(messages, "Solve 5x + 3 = 2 for x.")
response = chat(messages)
print(response)
```

Claude ä¼šç›´æ¥è¾“å‡ºè¯¦ç»†æ­¥éª¤å’Œç­”æ¡ˆï¼ˆå¯¹å­¦ä¹ ä¸åˆ©ï¼‰ã€‚

---

### âœ… ä½¿ç”¨ System Promptï¼ˆå¼•å¯¼å¼ï¼‰ï¼š

```python
response = chat(messages, system=system)
```

Claude ä¼šæ”¹ä¸º**æç¤ºå¼å¼•å¯¼**ï¼Œå¦‚ï¼š

> "To isolate x, what should we do first with the constants in the equation?"

---

## ğŸ” æ”¹è¿›ï¼šå°† System Prompt å˜æˆå¯é€‰å‚æ•°

### æ—§ç‰ˆæœ¬ `chat()` ç¼ºç‚¹ï¼š

- `system` æ˜¯ç¡¬ç¼–ç çš„ï¼Œæ— æ³•çµæ´»å¤ç”¨
- æ‰€æœ‰è°ƒç”¨éƒ½å›ºå®šè§’è‰²

---

### âœ… æ–°ç‰ˆæœ¬ï¼šä¼ å‚å¯é€‰ï¼ŒåŠ¨æ€ç»„è£…å‚æ•°

```python
def chat(messages, system=None):
    params = {
        "model": model,
        "max_tokens": 1000,
        "messages": messages
    }

    if system is not None:
        params["system"] = system

    response = client.messages.create(**params)
    return response.content[0].text
```

å¥½å¤„ï¼š

- æ²¡æœ‰ç³»ç»Ÿæç¤ºä¹Ÿèƒ½æ­£å¸¸è°ƒç”¨
- æƒ³æŒ‡å®šé£æ ¼æ—¶åªéœ€åŠ ä¸€è¡Œä¼ å‚
- æ›´é€šç”¨ã€æ›´å¯å¤ç”¨

---

## ğŸ§  æ€»ç»“

| èƒ½åŠ› | å†…å®¹ |
|------|------|
| âœ… æ§åˆ¶è¯­æ°”é£æ ¼ | ä½¿ç”¨ `system prompt` è®¾å®šè§’è‰² |
| âœ… æé«˜äº¤äº’æ€§ | Claude ä¸å†æ­»æ¿å›ç­”ï¼Œè€Œæ˜¯å¼•å¯¼æ€è€ƒ |
| âœ… æå‡ä»£ç å¯ç»´æŠ¤æ€§ | åŠ¨æ€ä¼ å‚ï¼Œçµæ´»æ§åˆ¶ system æç¤º |
| âœ… å®æˆ˜èƒ½åŠ›æå‡ | ä¸ºåç»­æ„å»ºæ•™å­¦åŠ©æ‰‹ã€å®¢æœã€ä¸ªæ€§åŒ–æœºå™¨äººæ‰“åŸºç¡€ |

---

ä¸‹ä¸€èŠ‚å¾ˆå¯èƒ½æ·±å…¥**Prompt ç»“æ„è®¾è®¡æŠ€å·§**æˆ–æ¢è®¨æ›´å¤šç³»ç»Ÿè§’è‰²æ¨¡æ¿çš„æ„é€ æ–¹å¼ã€‚

# ğŸ§ª ç¬¬å…«è¯¾ï¼šæ§åˆ¶ Claude ä»£ç è¾“å‡ºé£æ ¼ï¼ˆSystem Prompt å®æˆ˜ç»ƒä¹ ï¼‰

---

## ğŸ¯ æœ¬èŠ‚ç›®æ ‡

- å­¦ä¼šé€šè¿‡ `system prompt` æ§åˆ¶ç”Ÿæˆä»£ç çš„é£æ ¼
- å°è¯•å‡å°‘ Claude å›ç­”ä¸­çš„å†—ä½™å†…å®¹ï¼ˆæ³¨é‡Š/è§£é‡Šï¼‰
- ä½“éªŒä½¿ç”¨ Claude æ„å»ºâ€œæç®€ä¸»ä¹‰â€é£æ ¼çš„ä»£ç åŠ©æ‰‹

---

## ğŸ“Œ å®æˆ˜ä»»åŠ¡æè¿°

> ç¼–å†™ä¸€ä¸ª Python å‡½æ•°ï¼šæ£€æŸ¥å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨é‡å¤å­—ç¬¦ã€‚

é»˜è®¤è°ƒç”¨ Claude æ—¶ï¼Œå®ƒå¯èƒ½ä¼šï¼š

- è¾“å‡ºå®Œæ•´å‡½æ•°ï¼›
- é™„å¸¦è§£é‡Šè¯´æ˜ï¼›
- æ·»åŠ å¤§é‡æ³¨é‡Šï¼›
- è¾“å‡ºæ ¼å¼è¾ƒâ€œå•°å—¦â€ã€‚

---

## âœ¨ æå‡ç›®æ ‡ï¼šç”Ÿæˆæ›´ç®€æ´çš„å®ç°

### ğŸ§  æŠ€å·§ï¼šä½¿ç”¨ System Prompt å¼•å¯¼ Claude

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ prompt æ¥è®¾å®š Claude çš„è§’è‰²ï¼š

```python
system = "You are a Python engineer who writes very concise code."
```

ç„¶åè°ƒç”¨ `chat()` å¹¶ä¼ å…¥è¯¥ promptï¼š

```python
response = chat(messages, system=system)
```

---

## ğŸ§¾ ç¤ºä¾‹ç»“æ„

### ç”¨æˆ·æé—®ï¼š

```python
add_user_message(messages, "Write a Python function that checks if a string has duplicate characters.")
```

### Claude è¿”å›ï¼ˆç®€æ´é£æ ¼ï¼‰ï¼š

```python
def has_duplicates(s):
    return len(set(s)) != len(s)
```

æ— éœ€æ³¨é‡Šï¼Œæ— éœ€è§£é‡Šï¼Œ**åªæœ‰æ ¸å¿ƒé€»è¾‘**ã€‚

---

## âœ… å°ç»“

| é‡ç‚¹ | è¯´æ˜ |
|------|------|
| ğŸ¯ æ§åˆ¶è¾“å‡ºé£æ ¼ | ä½¿ç”¨ system prompt ç²¾å‡†å®šä¹‰é£æ ¼ |
| âœ‚ï¸ ç²¾ç®€ Claude è¾“å‡º | å‡å°‘ä¸å¿…è¦æ³¨é‡Š/è§£é‡Š |
| ğŸ§° Prompt æ¨¡æ¿å®ç”¨åŒ– | å¯å¤ç”¨äºå„ç§ä»£ç åœºæ™¯ï¼ˆå·¥ç¨‹å¸ˆåŠ©æ‰‹ï¼‰ |

---

## ğŸ’¡ ç³»ç»Ÿæç¤ºå»ºè®®æ¨¡æ¿

ä½ å¯ä»¥å°è¯•ä»¥ä¸‹é£æ ¼æŒ‡ä»¤ï¼š

- `You are a senior software engineer who prefers minimalism.`
- `Reply with only Python code and no explanation.`
- `Do not include any comments or print statements.`

è¿™äº›å°†å¸®åŠ©ä½ è·å¾—æ›´åŠ â€œç”Ÿäº§ç¯å¢ƒå‹å¥½â€çš„è¾“å‡ºã€‚

---

ğŸ“Œ æœ¬èŠ‚æ˜¯ Claude ä»£ç ç”Ÿæˆæ§åˆ¶èƒ½åŠ›çš„åˆæ­¥å®æˆ˜ï¼Œåç»­è¯¾ç¨‹å¯èƒ½æ·±å…¥ Prompt æ¨¡æ¿è®¾è®¡ã€è¡Œä¸ºæ§åˆ¶ä¸å®‰å…¨é™åˆ¶ç­‰å†…å®¹ã€‚


# 2025-07-26

# ğŸ§  ç¬¬äº”è¯¾ï¼šæ„å»º Claude çš„ä¸Šä¸‹æ–‡è®°å¿†æœºåˆ¶

## ğŸ“Œ è¯¾ç¨‹ç›®æ ‡ï¼š

- ç†è§£ Claude API çš„æ— çŠ¶æ€æ€§ã€‚
- å­¦ä¹ å¦‚ä½•æ‰‹åŠ¨ç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡ã€‚
- ç¼–å†™å¯å¤ç”¨çš„åŠ©æ‰‹å‡½æ•°ï¼Œå®ç°å¤šè½®å¯¹è¯èƒ½åŠ›ã€‚


## â— Claude æ˜¯æ— çŠ¶æ€çš„

Claudeï¼ˆä»¥åŠ Anthropic APIï¼‰ä¸å­˜å‚¨å¯¹è¯å†å²ï¼Œä¸ä¿å­˜ç”¨æˆ·å‘é€çš„æ¶ˆæ¯å’Œ Claude è¿”å›çš„å›å¤ã€‚

å› æ­¤ï¼Œè‹¥æƒ³å®ç°å¤šè½®ä¸Šä¸‹æ–‡å¯¹è¯ï¼Œéœ€ï¼š

1. åœ¨æœ¬åœ°ç»´æŠ¤å®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨ï¼ˆåŒ…æ‹¬ç”¨æˆ·å’ŒåŠ©ç†ï¼‰ã€‚
2. æ¯æ¬¡è¯·æ±‚éƒ½æäº¤å®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨ã€‚


## ğŸ” ç¤ºä¾‹è¯´æ˜ï¼šé”™è¯¯çš„å¯¹è¯ç»­å†™æ–¹å¼

### âŒ é”™è¯¯æ–¹å¼ï¼ˆæ— ä¸Šä¸‹æ–‡ï¼‰ï¼š

```python
message = client.messages.create(
    model=model,
    max_tokens=1000,
    messages=[{
        â€œroleâ€: â€œuserâ€,
        â€œcontentâ€: â€œWrite another sentence.â€
    }]
)
```

ç»“æœï¼šClaude æ— æ³•å…³è”å‰æ–‡ï¼Œè¿”å›ä¸â€œé‡å­è®¡ç®—â€æ— å…³çš„å†…å®¹ã€‚


## âœ… æ­£ç¡®æ–¹å¼ï¼šç»´æŠ¤å®Œæ•´æ¶ˆæ¯å†å²

### ç¤ºä¾‹ç»“æ„ï¼ˆä¼ªä»£ç ï¼‰ï¼š

```python
messages = [
    {â€œroleâ€: â€œuserâ€, â€œcontentâ€: â€œWhat is quantum computing?â€},
    {â€œroleâ€: â€œassistantâ€, â€œcontentâ€: â€œQuantum computing is â€¦â€},
    {â€œroleâ€: â€œuserâ€, â€œcontentâ€: â€œWrite another sentence.â€}
]
```

æ¯æ¬¡è°ƒç”¨ Claude APIï¼Œéƒ½ä¼ å…¥ä¸Šè¿°å®Œæ•´ `messages`ã€‚


## ğŸ› ï¸ åˆ›å»º 3 ä¸ªå¤ç”¨åŠ©æ‰‹å‡½æ•°

### 1. æ·»åŠ  User æ¶ˆæ¯ï¼š

```python
def add_user_message(messages, text):
1. æ·»åŠ ç”¨æˆ·æ¶ˆæ¯ï¼š

```python
def add_user_message(messages, text):
    user_msg = {â€œroleâ€: â€œuserâ€, â€œcontentâ€: text}
    messages.append(user_msg)
```

2. æ·»åŠ Assistantæ¶ˆæ¯ï¼š

```python
def add_assistant_message(messages, text):
    assistant_msg = {â€œroleâ€: â€œassistantâ€, â€œcontentâ€: text}
    messages.append(assistant_msg)
```

3. æ‰§è¡ŒClaudeå¯¹è¯è¯·æ±‚ï¼š

```python
def chat(messages):
    response = client.messages.create(
        model=model,
        max_tokens=1000,
        messages=messages
    )
    return response.content[0].text
```

## ğŸ’¬ å¤šè½®å¯¹è¯ç¤ºä¾‹

```python
# åˆå§‹åŒ–ä¸Šä¸‹æ–‡
messages = []

# ç¬¬ä¸€å¥æé—®
add_user_message(messages, â€œDefine quantum computing in one sentence.â€)
answer = chat(messages)
print(answer)

# ä¿å­˜ Claude çš„å›å¤
add_assistant_message(messages, answer)

# ç¬¬äºŒè½®æé—®
add_user_message(messages, â€œWrite another sentence.â€)
answer = chat(messages)
print(answer)
```

Claudeä¼šè¾“å‡ºä¸€æ¡å»¶ç»­å‰ä¸€æ¡å›ç­”çš„å¥å­ï¼Œç¡®ä¿ä¸Šä¸‹æ–‡è¿è´¯ã€‚

## ğŸ§  å°ç»“

- Claudeæ˜¯æ— çŠ¶æ€æ¨¡å‹ï¼Œæ¯è½®è¯·æ±‚éƒ½éœ€æäº¤å®Œæ•´ä¸Šä¸‹æ–‡ï¼›
- å®ç°äº†3ä¸ªå¯å¤ç”¨çš„è¾…åŠ©å‡½æ•°ï¼šadd_user_messageã€add_assistant_messageå’Œchatï¼›
- æ”¯æŒæ„å»ºè¿ç»­è‡ªç„¶çš„å¤šè½®äº¤äº’ä½“éªŒï¼›
- åç»­è¯¾ç¨‹å°†ç»§ç»­åŸºäºæ­¤æ¡†æ¶æ·±å…¥æ„å»ºé«˜çº§Agentã€‚
- åç»­ä»£ç å°†æäº¤è‡³[github](https://github.com/joyc/anthropic-claude-course)

# ğŸ¤– ç¬¬å…­è¯¾ï¼šæ„å»ºå¾ªç¯å¯¹è¯çš„ Claude èŠå¤©æœºå™¨äººï¼ˆJupyter ç‰ˆï¼‰

## ğŸ¯ è¯¾ç¨‹ç›®æ ‡ï¼š

- åœ¨ Notebook ä¸­è¿è¡Œä¸€ä¸ªç®€å•çš„ Claude èŠå¤©æœºå™¨äººã€‚
- å®ç°è¾“å…¥ â†’ ç”Ÿæˆ â†’ è¾“å‡º â†’ å†è¾“å…¥çš„å¾ªç¯æœºåˆ¶ã€‚
- ç»§ç»­å¤ç”¨ä¹‹å‰è¯¾ç¨‹å®ç°çš„ `chat()`ã€`add_user_message()` å’Œ `add_assistant_message()`ã€‚

## ğŸ”„ èŠå¤©å¾ªç¯ç»“æ„è¯´æ˜ï¼š

ç¨‹åºæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š

1. ä½¿ç”¨ `input()` è·å–ç”¨æˆ·è¾“å…¥ã€‚
2. å°†ç”¨æˆ·è¾“å…¥åŠ å…¥æ¶ˆæ¯åˆ—è¡¨ï¼ˆ`messages`ï¼‰ã€‚
3. ä½¿ç”¨ `chat()` è°ƒç”¨ Claude å¹¶è·å–å›å¤ã€‚
4. å°†å›å¤åŠ å…¥æ¶ˆæ¯åˆ—è¡¨ã€‚
5. æ‰“å°å›å¤å¹¶å›åˆ°ç¬¬ 1 æ­¥ã€‚
6. é‡å¤æ‰§è¡Œï¼Œç›´åˆ°æ‰‹åŠ¨ä¸­æ–­ï¼ˆå¦‚ç‚¹å‡»â€œåœæ­¢â€æŒ‰é’®æˆ–æŒ‰ `Esc`ï¼‰ã€‚

## ğŸ§± ç¤ºä¾‹æ¨¡æ¿ç»“æ„ï¼š

```python
# åˆå§‹åŒ–å¯¹è¯å†å²
messages = []

# æ— é™å¾ªç¯
while True:
    # è·å–ç”¨æˆ·è¾“å…¥
    user_input = input(â€œğŸ‘¤ You: â€œ)

    # åŠ å…¥ç”¨æˆ·æ¶ˆæ¯
    add_user_message(messages, user_input)

    # Claude å›å¤
    response = chat(messages)

    # åŠ å…¥ Claude å›å¤
    add_assistant_message(messages, response)

    # æ‰“å°å›å¤
    print(â€œ\nğŸ¤– Claude:\nâ€”\nâ€ + response + â€œ\nâ€”\nâ€)
```

## ğŸ’¡ ç¤ºä¾‹å¯¹è¯æ¼”ç¤ºï¼š

```
ğŸ‘¤ You: Whatâ€™s 1 + 1?
ğŸ¤– Claude:
â€”
1 + 1 equals 2.
â€”

ğŸ‘¤ You: Add two to that answer.
ğŸ¤– Claude:
â€”
Adding 2 to the previous answer (2) gives 4.
â€”
```

ğŸ§  Claude èƒ½ä¿ç•™ä¸Šä¸‹æ–‡çš„å…³é”®å°±åœ¨äºä½ å§‹ç»ˆä¼ å…¥å®Œæ•´çš„ `messages` åˆ—è¡¨ï¼

â€”

## âœ… æœ¬èŠ‚æ”¶è·ï¼š

- æŒæ¡ `while True + input()` æ­å»ºäººæœºå¯¹è¯å¾ªç¯ã€‚
- å·©å›ºäº† `messages` ä¸Šä¸‹æ–‡åœ¨å¤šè½®å¯¹è¯ä¸­çš„ä½œç”¨ã€‚
- æ‹¥æœ‰äº†ä¸€ä¸ªæœ€å°å¯ç”¨çš„ Claude èŠå¤©æœºå™¨äººåŸå‹ã€‚

ä½ ç°åœ¨å¯ä»¥åœ¨æœ¬åœ°æ„å»ºã€æµ‹è¯•å„ç§ prompt å’Œå¤šè½®é€»è¾‘äº†ï¼

ä¸‹ä¸€è¯¾å¯èƒ½è¿›å…¥ç³»ç»Ÿæç¤ºè®¾è®¡æˆ–é«˜çº§ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥ã€‚



# 2025-07-25

# ç¬¬ä¸€èŠ‚ï¼šè¯¾ç¨‹å¯¼è®ºï¼ˆCourse Introductionï¼‰

## ğŸ‘¨â€ğŸ« è®²å¸ˆä¿¡æ¯
- å§“åï¼šStephen Greider
- å…¬å¸ï¼šAnthropicï¼ŒæŠ€æœ¯å›¢é˜Ÿæˆå‘˜

---
## ğŸ—‚ï¸ æœ¬è¯¾ç¨‹æ¶µç›–å†…å®¹
1. Claude æ¨¡å‹ä»‹ç»
2. Anthropic API ä½¿ç”¨
3. Prompt å·¥ç¨‹ä¸è¯„ä¼°
4. å·¥å…·è°ƒç”¨ï¼ˆTool Useï¼‰
5. RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰
6. MCPï¼ˆModel Context Protocolï¼‰æ‰©å±•æœåŠ¡
7. å®˜æ–¹ Agentsï¼šCloud Code & Computer Use
8. å¤šæ­¥éª¤ä»»åŠ¡ä¸ Agent å·¥ä½œæµ

---

## ğŸ› ï¸ è¯¾ç¨‹å­¦ä¹ è¦æ±‚
- åŸºç¡€ Python çŸ¥è¯†
- å¯è¿è¡Œ Notebook çš„ Python ç¯å¢ƒ
- Anthropic API Keyï¼ˆè¯¾ç¨‹ä¸­æä¾›ç”³è¯·æ–¹æ³•ï¼‰

## å­¦ä¹ å»ºè®®
- ğŸ’» åŠ¨æ‰‹ç¼–å†™ä»£ç ï¼šè·Ÿéšè§†é¢‘è¾¹å­¦è¾¹åš
- â© å€é€Ÿæ’­æ”¾ï¼šåŠ å¿«è¿›åº¦èŠ‚çœæ—¶é—´ï¼Œæ–¹ä¾¿å›é¡¾é‡ç‚¹
- ğŸ§ª å®é™…åº”ç”¨ï¼šå°è¯•ä¿®æ”¹ã€æ‰©å±• Notebook ç¤ºä¾‹
- ğŸ§  é‡é˜»å°±é—® Claudeï¼šä»»ä½•é—®é¢˜éƒ½å¯ä»¥è®© Claude ååŠ©è§£å†³

---
# ç¬¬äºŒèŠ‚ï¼šClaude ä¸‰å¤§æ¨¡å‹å®¶æ—ä¸é€‰å‹æŒ‡å—

## ğŸ“Œ æ ¸å¿ƒè§‚ç‚¹
Claude æœ‰ **ä¸‰ä¸ªæ¨¡å‹å®¶æ—**ï¼Œå®ƒä»¬åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†åœ¨æ™ºèƒ½ã€é€Ÿåº¦å’Œæˆæœ¬ä¸Šå„æœ‰ä¼˜åŒ–é‡ç‚¹ã€‚

---

## ğŸ“Š æ¨¡å‹å¯¹æ¯”è¡¨

| æ¨¡å‹     | æ™ºèƒ½ | é€Ÿåº¦ | æˆæœ¬ | ç‰¹ç‚¹è¯´æ˜ |
|----------|------|------|------|----------|
| **Opus** | â­â­â­â­ | â­â­   | ğŸ’°ğŸ’°ğŸ’° | æœ€æ™ºèƒ½ï¼Œé€‚åˆå¤æ‚ã€å¤šæ­¥éª¤ä»»åŠ¡ |
| **Sonnet** | â­â­â­  | â­â­â­ | ğŸ’°ğŸ’°  | å¹³è¡¡å‹ï¼Œé€‚åˆå¤§å¤šæ•°åº”ç”¨åœºæ™¯ |
| **Haiku** | â­â­   | â­â­â­â­ | ğŸ’°    | æœ€å¿«ï¼Œé€‚åˆå®æ—¶é«˜é¢‘äº¤äº’ |

---

## ğŸ§  é€‰å‹æŒ‡å—

- ğŸ§© **å¤æ‚æ¨ç†ã€ä¼˜å…ˆè´¨é‡** â†’ `é€‰æ‹© Opus`
- âš¡ **å®æ—¶å“åº”ã€ä¼˜å…ˆé€Ÿåº¦** â†’ `é€‰æ‹© Haiku`
- âš–ï¸ **é€šç”¨åœºæ™¯ã€å‡è¡¡è€ƒè™‘** â†’ `é€‰æ‹© Sonnet`

---

## ğŸ” å®æˆ˜å»ºè®®ï¼šç»„åˆä½¿ç”¨æ¨¡å‹

- `Haiku`ï¼šç”¨æˆ·ç•Œé¢å®æ—¶äº¤äº’  
- `Sonnet`ï¼šä¸»ä¸šåŠ¡é€»è¾‘å¤„ç†  
- `Opus`ï¼šéœ€è¦æ·±åº¦æ™ºèƒ½çš„å¤æ‚ä»»åŠ¡

---

## ğŸ§ª æœ¬è¯¾ç¨‹ä½¿ç”¨æ¨¡å‹
- é»˜è®¤ä½¿ç”¨ **Sonnet** æ¨¡å‹
- åŸå› ï¼šæ™ºèƒ½ã€é€Ÿåº¦ã€æˆæœ¬ä¸‰è€…å…¼é¡¾ï¼Œæœ€é€‚åˆæ•™å­¦å’Œå¼€å‘å®è·µ

---
# ğŸ§  ç¬¬ä¸‰è¯¾ï¼šé€šè¿‡ API ä½¿ç”¨ Claude å¹¶ç”Ÿæˆæ–‡æœ¬

---

## ğŸ¯ è¯¾ç¨‹ç›®æ ‡

æœ¬èŠ‚è¯¾å°†å¸¦ä½ äº†è§£å¦‚ä½•é€šè¿‡ Anthropic API è°ƒç”¨ Claudeï¼Œå¹¶ç”Ÿæˆæ–‡æœ¬ã€‚  
æˆ‘ä»¬å°†ï¼š
- æ¨¡æ‹Ÿä¸€ä¸ªåŸºç¡€èŠå¤©åº”ç”¨çš„åç«¯æµç¨‹ï¼›
- è®²è§£å®Œæ•´çš„è¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼›
- æ¢ç´¢ Claude å†…éƒ¨çš„æ–‡æœ¬ç”Ÿæˆæœºåˆ¶ã€‚

---

## ğŸ§± Claude API è¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼š5 ä¸ªæ­¥éª¤

### âœ… **Step 1ï¼šå‰ç«¯ç”¨æˆ·å‘èµ·è¯·æ±‚**

- ç”¨æˆ·åœ¨ Web App ä¸­è¾“å…¥æ¶ˆæ¯ï¼Œç‚¹å‡»â€œå‘é€â€ï¼›
- æ¶ˆæ¯è¢«å‘é€è‡³ä½ è‡ªå·±å®ç°çš„åç«¯æœåŠ¡å™¨ã€‚

âš ï¸ **å®‰å…¨æç¤º**ï¼š  
> ä¸è¦ä»å‰ç«¯ï¼ˆWeb/Mobileï¼‰ç›´æ¥è°ƒç”¨ Claude APIã€‚API è¯·æ±‚å¿…é¡»åŒ…å« Secret Keyï¼Œåº”ä»…åœ¨åç«¯è°ƒç”¨ã€‚

---

### âœ… **Step 2ï¼šåç«¯å‘ Claude API å‘èµ·è¯·æ±‚**

- åç«¯æ¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚åï¼Œä½¿ç”¨ Anthropic æä¾›çš„ **SDK æˆ– HTTP è¯·æ±‚**è°ƒç”¨ APIã€‚
- å®˜æ–¹ SDK æ”¯æŒè¯­è¨€åŒ…æ‹¬ï¼š`Python`ã€`TypeScript`ã€`JavaScript`ã€`Go`ã€`Ruby`ã€‚

ğŸ“¦ å¿…å¡«å­—æ®µï¼š

```json
{
  "api_key": "ä½ çš„å¯†é’¥",
  "model": "æ¨¡å‹åç§°",
  "messages": [...],
  "max_tokens": 300
}
```

---

### âœ… **Step 3ï¼šClaude å†…éƒ¨æ–‡æœ¬ç”Ÿæˆæµç¨‹ï¼ˆè¯­è¨€æ¨¡å‹æœºåˆ¶ï¼‰**

Claude ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹è¿›è¡Œç”Ÿæˆï¼Œè¿‡ç¨‹å¯æ‹†ä¸º **å››ä¸ªé˜¶æ®µ**ï¼š

1. **Tokenizationï¼ˆåˆ†è¯ï¼‰**
   - è¾“å…¥æ–‡æœ¬è¢«æ‹†è§£ä¸º tokenï¼ˆå•è¯ã€éƒ¨åˆ†è¯ã€ç¬¦å·ã€ç©ºæ ¼ç­‰ï¼‰ã€‚
   - ç¤ºä¾‹ï¼š`"quantum"` â†’ `["quantum"]`

2. **Embeddingï¼ˆå‘é‡åŒ–ï¼‰**
   - æ¯ä¸ª token è¢«è½¬æ¢æˆä¸€ä¸ª embeddingï¼ˆæ•°å­—å‘é‡ï¼‰ï¼Œè¡¨ç¤ºå…¶æ‰€æœ‰å¯èƒ½å«ä¹‰ã€‚

3. **Contextualizationï¼ˆä¸Šä¸‹æ–‡ç²¾åŒ–ï¼‰**
   - Claude æ ¹æ®å‰å token å¯¹æ¯ä¸ª embedding è¿›è¡Œè°ƒæ•´ï¼›
   - ä½¿æ¯ä¸ª token çš„å«ä¹‰åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å”¯ä¸€æ˜ç¡®ã€‚

4. **Generationï¼ˆç”Ÿæˆï¼‰**
   - æ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ª token çš„æ¦‚ç‡åˆ†å¸ƒï¼›
   - ç»“åˆæ¦‚ç‡å’Œéšæœºæ€§é€‰æ‹©ä¸‹ä¸€ä¸ªè¯ï¼›
   - å°†å…¶æ·»åŠ è¿›å·²æœ‰çš„ token åˆ—è¡¨ï¼Œé‡å¤è¯¥è¿‡ç¨‹ç›´åˆ°ç”Ÿæˆç»ˆæ­¢ã€‚

---

### âœ… **Step 4ï¼šç”Ÿæˆåœæ­¢çš„åˆ¤æ–­æœºåˆ¶**

Claude æ¯ç”Ÿæˆä¸€ä¸ª token éƒ½ä¼šåˆ¤æ–­æ˜¯å¦åº”åœæ­¢ï¼š
- æ˜¯å¦è¶…è¿‡ `max_tokens` é™åˆ¶ï¼›
- æ˜¯å¦ç”Ÿæˆäº†ç‰¹æ®Šçš„ `end_of_sequence` åœæ­¢ç¬¦ã€‚

---

### âœ… **Step 5ï¼šå“åº”è¿”å›ä¸å‰ç«¯å±•ç¤º**

- API è¿”å›ç»“æœè‡³åç«¯æœåŠ¡å™¨ï¼ŒåŒ…å«ï¼š
```json
{
  "completion": "ç”Ÿæˆçš„æ–‡æœ¬",
  "usage": {
    "input_tokens": 123,
    "output_tokens": 234
  },
  "stop_reason": "end_of_sequence"
}
```

- åç«¯å°† `completion` ç»“æœè¿”å›ç»™å‰ç«¯å±•ç¤ºåœ¨èŠå¤©çª—å£ä¸­ã€‚

---

## ğŸ“š å°ç»“

- æœ¬èŠ‚ç›®çš„ï¼šå¸®åŠ©ä½ ç†è§£ Claude çš„è°ƒç”¨æµç¨‹ï¼›
- ç†Ÿæ‚‰ä¸€äº›å¸¸è§æœ¯è¯­ä¸ç”Ÿæˆæœºåˆ¶ï¼›
- ä¸å¿…æ­»è®°ç»†èŠ‚ï¼Œåç»­è¯¾ç¨‹å°†é€šè¿‡å®æˆ˜è¿›ä¸€æ­¥å·©å›ºã€‚

---
# ğŸ’» ç¬¬å››è¯¾ï¼šç”¨ä»£ç è°ƒç”¨ Claude APIï¼ˆå…¥é—¨å®è·µï¼‰

---

## ğŸ¯ æœ¬èŠ‚ç›®æ ‡

é€šè¿‡å®é™…ä»£ç æ¼”ç¤ºï¼Œå®Œæˆä¸€æ¬¡æœ€åŸºæœ¬çš„ Claude API è¯·æ±‚ã€‚  
ä½ å°†å­¦ä¼šï¼š

- å®‰è£… SDK å’Œé…ç½®ç¯å¢ƒå˜é‡
- åˆ›å»º API å®¢æˆ·ç«¯
- ç†è§£ `messages` çš„ç»“æ„å’Œä½œç”¨
- å‘é€ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚å¹¶è§£æ Claude çš„å›ç­”

---

## ğŸ§° æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

æ‰“å¼€ Jupyter Notebookï¼Œå¹¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```python
%pip install anthropic python-dotenv
```

âš ï¸ VS Code ä¸­ `%` å¯èƒ½ä¼šæç¤ºè¯­æ³•é”™è¯¯ï¼Œå¯ä»¥å¿½ç•¥ã€‚

---

## ğŸ” æ­¥éª¤ 2ï¼šé…ç½® API Key

1. åœ¨ Notebook åŒçº§ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼›
2. å¡«å…¥ä½ çš„ API Keyï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```
ANTHROPIC_API_KEY="your_api_key_here"
```

âœ… å»ºè®®æŠŠ `.env` åŠ å…¥ `.gitignore`ï¼Œé˜²æ­¢å¯†é’¥è¢«ä¸Šä¼ è‡³å…¬å…±ä»“åº“ã€‚

3. åœ¨ Notebook ä¸­åŠ è½½è¯¥ç¯å¢ƒå˜é‡ï¼š

```python
from dotenv import load_dotenv
import os

load_dotenv()
api_key = os.getenv("ANTHROPIC_API_KEY")
```

---

## ğŸ¤– æ­¥éª¤ 3ï¼šåˆ›å»º API å®¢æˆ·ç«¯

```python
from anthropic import Anthropic

client = Anthropic(api_key=api_key)
model = "claude-3-sonnet-20240229"
```

---

## ğŸ“¤ æ­¥éª¤ 4ï¼šå‘é€ä¸€æ¬¡ API è¯·æ±‚

Claude SDK çš„ `client.messages.create()` æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå…³é”®å‚æ•°ï¼š

- `model`ï¼šæ¨¡å‹åç§°ï¼ˆå¦‚ Sonnetï¼‰
- `max_tokens`ï¼šæœ€å¤§ç”Ÿæˆé•¿åº¦é™åˆ¶
- `messages`ï¼šå¯¹è¯å†å²ï¼ˆæ•°ç»„æ ¼å¼ï¼‰

### âš ï¸ å…³äº `max_tokens`

- å®ƒæ˜¯ä¸Šé™ï¼Œè€Œéç›®æ ‡é•¿åº¦ï¼›
- Claude ä¸ä¼šâ€œæ•…æ„â€ç”Ÿæˆåˆšå¥½è¿™ä¹ˆé•¿ï¼Œåªæ˜¯é‡åˆ°é™åˆ¶ä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚

---

## ğŸ“© è¯·æ±‚ç»“æ„ä¸¾ä¾‹

```python
message = client.messages.create(
    model=model,
    max_tokens=1000,
    messages=[
        {
            "role": "user",
            "content": "What is quantum computing? Answer in one sentence."
        }
    ]
)
```

---

## ğŸ“ å“åº”å¤„ç†

Claude çš„è¿”å›ç»“æœç»“æ„è¾ƒæ·±ï¼Œæ–‡æœ¬å†…å®¹åµŒå¥—åœ¨ï¼š

```python
print(message.content[0].text)
```

åªæ‰“å° Claude è¿”å›çš„æœ€ç»ˆç­”æ¡ˆï¼Œå¿½ç•¥å…¶ä»–å±æ€§ï¼ˆå¦‚ token ä½¿ç”¨æƒ…å†µã€stop reason ç­‰ï¼‰ã€‚

---

## âœ… æœ¬èŠ‚æ€»ç»“

- æˆåŠŸé€šè¿‡ä»£ç å‘é€ Claude è¯·æ±‚ï¼›
- ç†Ÿæ‚‰ `messages` ç»“æ„ï¼šç”± `user` æˆ– `assistant` æ¶ˆæ¯æ„æˆï¼›
- ä¸ºåç»­æ„å»ºå¯¹è¯å¼ç³»ç»Ÿæ‰“ä¸‹åŸºç¡€ã€‚


# 2025-07-24

<!-- Content_END -->
